<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guía Interactiva Detallada HZ - 27/04/2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <script>
        // Configuración de Tailwind CSS (si es necesario extender)
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'turf-green': '#228B22', // Verde césped
                        'turf-dirt': '#D2B48C',  // Marrón tierra claro
                        'turf-rail': '#A0522D',  // Marrón barandilla
                        'turf-sky': '#ADD8E6',   // Azul cielo claro
                        'turf-text': '#3A3A3A',  // Gris oscuro texto
                        'turf-gold': '#FFD700', // Dorado para favoritos/picks
                        'turf-silver': '#C0C0C0', // Plata
                        'turf-bronze': '#CD7F32', // Bronce
                        'track-bg': '#f4e9d8',   // Fondo pista simulación
                        'finish-line': '#e53e3e', // Línea meta roja
                        'modal-bg': 'rgba(0, 0, 0, 0.6)', // Fondo modal semitransparente
                    }
                }
            }
        }
    </script>
    <style>
        /* Estilos generales, pestañas, tabla, análisis, iconos */
        body { font-family: 'Inter', sans-serif; background-color: #f0f4f8; }
        .tab-active { background-color: #228B22; color: white; border-color: #166d16; box-shadow: 0 2px 4px rgba(0,0,0,0.1); transform: translateY(-2px); }
        .tab-inactive { background-color: white; color: #A0522D; border-color: #D2B48C; }
        .tab-inactive:hover { background-color: #f7fafc; border-color: #A0522D; transform: translateY(-1px); }
        .tab, .tab-content { transition: all 0.3s ease-in-out; }
        .tab-content { display: none; animation: fadeIn 0.5s ease-in-out; }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        th, td { padding: 0.6rem 0.75rem; text-align: left; border-bottom: 1px solid #e2e8f0; font-size: 0.8rem; vertical-align: middle; }
        th { background-color: #e2e8f0; color: #4a5568; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }
        tbody tr:nth-child(odd) { background-color: #fdfdfd; }
        tbody tr:nth-child(even) { background-color: #f7fafc; }
        tbody tr:hover { background-color: #edf2f7; cursor: pointer; }
        .horse-name { font-weight: 600; color: #2c5282; }
        .jockey-name { font-style: italic; color: #5a67d8; }
        .trainer-name { color: #805ad5; }
        .ult-act { font-family: monospace; letter-spacing: 1px; word-break: break-all; }
        .analysis-section { border-left: 4px solid #D2B48C; padding-left: 1rem; margin-top: 1.5rem; }
        .analysis-title { font-size: 1.1rem; font-weight: 600; color: #A0522D; margin-bottom: 0.5rem; }
        .favorite { color: #b7791f; font-weight: 600; }
        .place-option { color: #718096; font-weight: 600; }
        .longshot { color: #975a16; font-weight: 600; }
        /* Iconos FontAwesome con colores temáticos */
        .fa-horse-head { color: #A0522D; } .fa-ruler-horizontal { color: #228B22; } .fa-clock { color: #4A90E2; } .fa-euro-sign { color: #F5A623; } .fa-binoculars { color: #4a5568; } .fa-book-open { color: #4a5568; } .fa-star { color: #FFD700; } .fa-medal { color: #C0C0C0; } .fa-rocket { color: #CD7F32; } .fa-weight-hanging { color: #718096; } .fa-map-pin { color: #dd6b20; } .fa-cloud-sun { color: #4299e1; } .fa-play { color: white; }

        /* --- ESTILOS PARA LA SIMULACIÓN --- */
        .simulation-container { margin-top: 1.5rem; padding: 1rem; border: 1px solid #D2B48C; border-radius: 8px; background-color: #fff; box-shadow: inset 0 1px 3px rgba(0,0,0,0.1); }
        .race-track { position: relative; width: 100%; height: 250px; background-color: #f4e9d8; border-radius: 4px; overflow: hidden; border: 1px solid #e2d6c4; padding: 10px 0; }
        .finish-line { position: absolute; right: 20px; top: 0; bottom: 0; width: 5px; background-color: #e53e3e; box-shadow: 2px 0 5px rgba(0,0,0,0.2); }
        .finish-line::after { content: 'META'; position: absolute; top: -20px; left: -15px; font-size: 10px; font-weight: bold; color: #e53e3e; transform: rotate(-90deg); transform-origin: left top; white-space: nowrap; }
        .horse-runner { position: absolute; left: 10px; width: 25px; height: 25px; border-radius: 50%; background-color: #A0522D; color: white; font-size: 10px; font-weight: bold; display: flex; justify-content: center; align-items: center; transition: transform 0.1s linear; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
        /* Colores de los mantillas */
        .horse-runner[data-color="1"] { background-color: #DC2626; } .horse-runner[data-color="2"] { background-color: #2563EB; } .horse-runner[data-color="3"] { background-color: #16A34A; } .horse-runner[data-color="4"] { background-color: #FBBF24; } .horse-runner[data-color="5"] { background-color: #9333EA; } .horse-runner[data-color="6"] { background-color: #F97316; } .horse-runner[data-color="7"] { background-color: #EC4899; } .horse-runner[data-color="8"] { background-color: #6B7280; } .horse-runner[data-color="9"] { background-color: #14B8A6; } .horse-runner[data-color="10"] { background-color: #000000; } .horse-runner[data-color="11"] { background-color: #ffffff; color: #000; border: 1px solid #ccc; } .horse-runner[data-color="12"] { background-color: #ca8a04; } .horse-runner[data-color="13"] { background-color: #65a30d; } .horse-runner[data-color="14"] { background-color: #be185d; } .horse-runner[data-color="15"] { background-color: #0891b2; } .horse-runner[data-color="16"] { background-color: #4d7c0f; }
        .horse-running { /* La transformación se aplica con JS */ }

        /* --- ESTILOS PARA EL MODAL --- */
        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0, 0, 0, 0.6); display: flex; justify-content: center; align-items: center; z-index: 1000; opacity: 0; visibility: hidden; transition: opacity 0.3s ease, visibility 0.3s ease; }
        .modal-overlay.active { opacity: 1; visibility: visible; }
        .modal-content { background-color: white; padding: 1.5rem 2rem; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); width: 90%; max-width: 600px; position: relative; transform: scale(0.95); transition: transform 0.3s ease; max-height: 90vh; overflow-y: auto; }
        .modal-overlay.active .modal-content { transform: scale(1); }
        .modal-close-btn { position: absolute; top: 10px; right: 15px; background: none; border: none; font-size: 1.8rem; color: #aaa; cursor: pointer; line-height: 1; }
        .modal-close-btn:hover { color: #333; }
        .modal-horse-title { font-size: 1.5rem; font-weight: bold; color: #2c5282; margin-bottom: 1rem; border-bottom: 2px solid #D2B48C; padding-bottom: 0.5rem; }
        .modal-detail-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 0.8rem; font-size: 0.9rem; margin-bottom: 1rem; }
        .modal-detail-item strong { color: #A0522D; margin-right: 0.5em; display: block; margin-bottom: 0.1em; font-size: 0.8em; text-transform: uppercase; }
        .modal-detail-item span { display: block; }
        .modal-equipamiento span { display: inline-block; background-color: #e2e8f0; color: #4a5568; padding: 0.2rem 0.5rem; border-radius: 5px; font-size: 0.75rem; margin-right: 0.3rem; margin-bottom: 0.3rem; }
        .modal-analysis { margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #eee; }
        .modal-analysis-title { font-weight: 600; color: #A0522D; margin-bottom: 0.5rem; font-size: 1rem; }
        .modal-analysis-text { font-size: 0.85rem; line-height: 1.5; color: #4A5568; white-space: pre-wrap; /* Para respetar saltos de línea */ }
        .modal-pick-status { margin-top: 1rem; padding: 0.6rem; border-radius: 5px; font-weight: bold; text-align: center; font-size: 0.9rem; }
        /* Clases para los picks */
        .pick-ganador { background-color: #FFFBEB; border: 1px solid #FBBF24; color: #B45309; }
        .pick-colocado { background-color: #F1F5F9; border: 1px solid #94A3B8; color: #475569; }
        .pick-sorpresa { background-color: #FEF3C7; border: 1px solid #F59E0B; color: #92400E; }
        .pick-none { display: none; } /* Ocultar si no hay pick */

        /* Responsive table adjustments */
        @media (max-width: 768px) {
            table, thead, tbody, th, td, tr { display: block; }
            thead tr { position: absolute; top: -9999px; left: -9999px; }
            tr { border: 1px solid #ccc; margin-bottom: 1rem; border-radius: 8px; overflow: hidden; }
            td { border: none; border-bottom: 1px solid #eee; position: relative; padding-left: 45%; padding-top: 0.5rem; padding-bottom: 0.5rem; white-space: normal; text-align: left; min-height: 30px; display: flex; align-items: center; }
            td:before { position: absolute; top: 0; left: 6px; width: 40%; padding-right: 10px; white-space: nowrap; text-align: left; font-weight: 600; color: #4a5568; height: 100%; display: flex; align-items: center; font-size: 0.75rem; border-right: 1px solid #e2e8f0; background-color: #f7fafc; padding-left: 4px; }
            /* Definir el contenido de ::before para cada columna */
            td:nth-of-type(1):before { content: "Nº"; } td:nth-of-type(2):before { content: "Caballo"; } td:nth-of-type(3):before { content: "Edad"; } td:nth-of-type(4):before { content: "KG"; } td:nth-of-type(5):before { content: "Jinete"; } td:nth-of-type(6):before { content: "Cuadra"; } td:nth-of-type(7):before { content: "Entrenador"; } td:nth-of-type(8):before { content: "Cajón"; } td:nth-of-type(9):before { content: "Últ. Act."; }
            .race-track { height: 200px; }
            .horse-runner { width: 20px; height: 20px; font-size: 8px; }
            .modal-content { width: 95%; padding: 1.5rem; max-height: 85vh; }
            .modal-horse-title { font-size: 1.3rem; }
            .modal-detail-grid { grid-template-columns: 1fr; }
        }
        /* Footer */
        footer { margin-top: 2rem; padding-top: 1rem; border-top: 1px solid #D2B48C; text-align: center; font-size: 0.8rem; color: #718096; }

    </style>
</head>
<body class="bg-gray-100 text-turf-text p-4 md:p-8">

    <div class="container mx-auto max-w-7xl bg-white rounded-2xl shadow-xl p-6 md:p-10">

        <header class="text-center mb-8 border-b pb-6 border-turf-dirt">
            <h1 class="text-3xl md:text-4xl font-bold text-turf-green mb-1">
                <i class="fas fa-horse-head mr-2"></i>Hipódromo de la Zarzuela
            </h1>
            <p class="text-lg text-gray-600 font-semibold mb-2">Ranchos Magazine</p>
            <p class="text-xl text-turf-rail font-semibold">Guía Completa - Domingo, 27 de Abril de 2025</p>
            <p class="text-xs text-gray-500 mt-1">Análisis y Pronósticos basados en el programa oficial</p>
        </header>

        <div class="mb-8 flex flex-wrap justify-center gap-2 md:gap-3">
            <button class="tab tab-active py-2 px-3 md:px-4 rounded-md border-2 font-semibold text-sm md:text-base shadow-md focus:outline-none" onclick="changeTab(event, 'carrera1')">1ª Carrera</button>
            <button class="tab tab-inactive py-2 px-3 md:px-4 rounded-md border-2 font-semibold text-sm md:text-base shadow-md focus:outline-none" onclick="changeTab(event, 'carrera2')">2ª Carrera</button>
            <button class="tab tab-inactive py-2 px-3 md:px-4 rounded-md border-2 font-semibold text-sm md:text-base shadow-md focus:outline-none" onclick="changeTab(event, 'carrera3')">3ª Carrera</button>
            <button class="tab tab-inactive py-2 px-3 md:px-4 rounded-md border-2 font-semibold text-sm md:text-base shadow-md focus:outline-none" onclick="changeTab(event, 'carrera4')">4ª Carrera</button>
            <button class="tab tab-inactive py-2 px-3 md:px-4 rounded-md border-2 font-semibold text-sm md:text-base shadow-md focus:outline-none" onclick="changeTab(event, 'carrera5')">5ª Carrera</button>
            <button class="tab tab-inactive py-2 px-3 md:px-4 rounded-md border-2 font-semibold text-sm md:text-base shadow-md focus:outline-none" onclick="changeTab(event, 'carrera6')">6ª Carrera</button>
            <button class="tab tab-inactive py-2 px-3 md:px-4 rounded-md border-2 font-semibold text-sm md:text-base shadow-md focus:outline-none" onclick="changeTab(event, 'paddock')"><i class="fas fa-binoculars mr-1"></i> Paddock</button>
            <button class="tab tab-inactive py-2 px-3 md:px-4 rounded-md border-2 font-semibold text-sm md:text-base shadow-md focus:outline-none" onclick="changeTab(event, 'leyenda')"><i class="fas fa-book-open mr-1"></i> Leyenda</button>
        </div>

        <div id="tab-contents">

            <div id="carrera1" class="tab-content active p-4 bg-gray-50 rounded-lg shadow-inner">
                 <h2 class="text-2xl font-bold text-turf-green mb-1">1ª Carrera: Premio Revista Corta Cabeza</h2>
                 <p class="mb-3 text-md text-turf-rail">(Hándicap Dividido 2ª parte) (Made in Spain) - 2.200 mts.</p>
                 <div class="grid grid-cols-2 md:grid-cols-3 gap-4 mb-5 text-sm border-y py-3 bg-white rounded">
                    <div class="flex items-center"><i class="fas fa-clock mr-2 text-blue-500"></i> <strong>Hora:</strong> 11:30 h.</div>
                    <div class="flex items-center"><i class="fas fa-euro-sign mr-2 text-yellow-600"></i> <strong>Premio:</strong> 7.650 €</div>
                    <div class="flex items-center"><i class="fas fa-cloud-sun mr-2 text-sky-500"></i> <strong>Pista (Prevista):</strong> Buena / Bueno-Blando</div>
                 </div>

                 <div class="analysis-section mb-6">
                     <h3 class="analysis-title">Análisis y Pronóstico (Informe Resumen)</h3>
                     <p class="text-sm mb-3">Prueba que abre la jornada, un hándicap dividido (2ª parte) sobre 2.200 metros para caballos y yeguas de 4 años en adelante. Lote de valores medios, muchos buscando su primera victoria del año. La pista presumiblemente buena a blanda podría beneficiar a los caballos fondistas con resistencia.</p>
                     <ul class="list-none space-y-3 text-sm">
                         <li><i class="fas fa-star mr-2 text-turf-gold"></i><strong class="favorite">Ganador:</strong> <span class="horse-name">9 SPANISH RULER (FR)</span></li>
                         <li><i class="fas fa-medal mr-2 text-turf-silver"></i><strong class="place-option">Colocados:</strong> <span class="horse-name">7 VIKING CITY (FR)</span>, <span class="horse-name">1 SOFUNNY (IRE)</span></li>
                          <li><i class="fas fa-rocket mr-2 text-turf-bronze"></i><strong class="longshot">Sorpresa:</strong> <span class="horse-name">13 URABA (FR)</span></li>
                     </ul>
                 </div>

                 <div class="simulation-container">
                     <button id="simulate-btn-1" class="bg-turf-rail hover:bg-opacity-80 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline mb-3 text-sm" onclick="startSimulation(1)">
                         <i class="fas fa-play mr-2"></i>Simular Carrera 1
                     </button>
                     <div id="race-track-1" class="race-track hidden">
                         <div class="finish-line"></div>
                     </div>
                      <p id="winner-info-1" class="text-center mt-2 font-semibold text-turf-green hidden"></p>
                 </div>

                 <h4 class="text-lg font-semibold text-turf-rail mb-3 mt-6">Participantes (Programa Detallado)</h4>
                 <div class="overflow-x-auto">
                      <table id="participants-1" class="min-w-full bg-white rounded-lg shadow participants-table">
                         <thead>
                             <tr><th>Nº</th><th>Caballo</th><th>Edad</th><th>KG</th><th>Jinete</th><th>Cuadra</th><th>Entrenador</th><th>Cajón</th><th class="text-center">Últ. Act.</th></tr>
                         </thead>
                        <tbody>
                            <tr onclick="showHorseModal(this, 1)"><td>1</td><td class="horse-name">SOFUNNY (IRE)</td><td>6a</td><td>63</td><td class="jockey-name">B. FAYOS</td><td>MAFRIS</td><td class="trainer-name">L. CROSELL</td><td class="text-center">10</td><td class="ult-act text-center">08,08,06,07,01</td></tr>
                            <tr onclick="showHorseModal(this, 1)"><td>2</td><td class="horse-name">LADY WULFRUN (GB) (4)(8)</td><td>4a</td><td>63</td><td class="jockey-name">G. ARGUINZONES (60)</td><td>DIAZ MOR</td><td class="trainer-name">B. RAMA</td><td class="text-center">1</td><td class="ult-act text-center">07,11,08,05,02</td></tr>
                            <tr onclick="showHorseModal(this, 1)"><td>3</td><td class="horse-name">ORBAYO (IRE) (8)</td><td>9a</td><td>62,5</td><td class="jockey-name">N. DE JULIAN</td><td>LAS AGUILAS</td><td class="trainer-name">A. CARRASCO</td><td class="text-center">6</td><td class="ult-act text-center">07,01,05,07,16</td></tr>
                            <tr onclick="showHorseModal(this, 1)"><td>4</td><td class="horse-name">PIONINA</td><td>4a</td><td>62,5</td><td class="jockey-name">J. GELABERT</td><td>JUNCALILLO</td><td class="trainer-name">F. RODRIGUEZ</td><td class="text-center">8</td><td class="ult-act text-center">05,03,05,02,04</td></tr>
                            <tr onclick="showHorseModal(this, 1)"><td>5</td><td class="horse-name">DEMBE (FR) (a)(4)(8)</td><td>5a</td><td>62</td><td class="jockey-name">V. JANACEK</td><td>SANTA BARBARA</td><td class="trainer-name">J.M. OSORIO</td><td class="text-center">14</td><td class="ult-act text-center">02,03,NP,04,09</td></tr>
                            <tr onclick="showHorseModal(this, 1)"><td>6</td><td class="horse-name">WHIM TRADE (FR) (5)</td><td>4a</td><td>62</td><td class="jockey-name">J.C. DIESTRA</td><td>HERCULES Y FALLAS</td><td class="trainer-name">A. TSERETELI</td><td class="text-center">2</td><td class="ult-act text-center">11,05,05,06,03</td></tr>
                            <tr onclick="showHorseModal(this, 1)"><td>7</td><td class="horse-name">VIKING CITY (FR) (5)(8)</td><td>6a</td><td>61,5</td><td class="jockey-name">H. MOUESAN</td><td>ESGUEVA</td><td class="trainer-name">T. CALLEJOS</td><td class="text-center">11</td><td class="ult-act text-center">12,03,09,01,02</td></tr>
                            <tr onclick="showHorseModal(this, 1)"><td>8</td><td class="horse-name">STARSHADOW (GB) (5)</td><td>5a</td><td>61,5</td><td class="jockey-name">D. SIKOROVA (60,5)</td><td>CELSO MENDEZ</td><td class="trainer-name">M. ALVAREZ</td><td class="text-center">12</td><td class="ult-act text-center">04,05,05,10,03</td></tr>
                            <tr onclick="showHorseModal(this, 1)"><td>9</td><td class="horse-name">SPANISH RULER (FR) (5)(8)</td><td>5a</td><td>61</td><td class="jockey-name">R. SOUSA</td><td>YEGUADA VALMODOMUS</td><td class="trainer-name">D. BENITEZ</td><td class="text-center">3</td><td class="ult-act text-center">06,04,03,04,02</td></tr>
                            <tr onclick="showHorseModal(this, 1)"><td>10</td><td class="horse-name">MARCO AURELIO (IRE)</td><td>4a</td><td>59</td><td class="jockey-name">E. AREVALO</td><td>DON PEPE</td><td class="trainer-name">M. ALVAREZ</td><td class="text-center">5</td><td class="ult-act text-center">09,04,06,05,03</td></tr>
                            <tr onclick="showHorseModal(this, 1)"><td>11</td><td class="horse-name">YIRA (FR) (8)</td><td>4a</td><td>59</td><td class="jockey-name">C. PEREZ (57)</td><td>MANU POLO</td><td class="trainer-name">B. MORENO</td><td class="text-center">7</td><td class="ult-act text-center">03,07,07,05,07</td></tr>
                            <tr onclick="showHorseModal(this, 1)"><td>12</td><td class="horse-name">MAZELTOF (FR) (8)</td><td>9a</td><td>57</td><td class="jockey-name">A. MARTINEZ (56)</td><td>OLYMPUS</td><td class="trainer-name">J.C. CERQUEIRA</td><td class="text-center">13</td><td class="ult-act text-center">08,05,05,05,03</td></tr>
                            <tr onclick="showHorseModal(this, 1)"><td>13</td><td class="horse-name">URABA (FR) (8)</td><td>5a</td><td>54</td><td class="jockey-name">L. MENDIZABAL (55)</td><td>ALVELA</td><td class="trainer-name">L. ELARRE</td><td class="text-center">4</td><td class="ult-act text-center">07,02,08,07,05</td></tr>
                            <tr onclick="showHorseModal(this, 1)"><td>14</td><td class="horse-name">MAHATMA (IRE) (4)</td><td>5a</td><td>52,5</td><td class="jockey-name">V. ALONSO V. (51,5)</td><td>GIULIA</td><td class="trainer-name">M. AUGELLI</td><td class="text-center">9</td><td class="ult-act text-center">11,10,07,04,03</td></tr>
                        </tbody>
                      </table>
                 </div>
            </div>

            <div id="carrera2" class="tab-content p-4 bg-gray-50 rounded-lg shadow-inner">
                 <h2 class="text-2xl font-bold text-turf-green mb-1">2ª Carrera: Premio Maracay</h2>
                 <p class="mb-3 text-md text-turf-rail">(Made in Spain) - 1.400 mts.</p>
                 <div class="grid grid-cols-2 md:grid-cols-3 gap-4 mb-5 text-sm border-y py-3 bg-white rounded">
                    <div class="flex items-center"><i class="fas fa-clock mr-2 text-blue-500"></i> <strong>Hora:</strong> 12:05 h.</div>
                    <div class="flex items-center"><i class="fas fa-euro-sign mr-2 text-yellow-600"></i> <strong>Premio:</strong> 10.200 €</div>
                    <div class="flex items-center"><i class="fas fa-cloud-sun mr-2 text-sky-500"></i> <strong>Pista (Prevista):</strong> Buena / Bueno-Blando</div>
                 </div>

                 <div class="analysis-section mb-6">
                     <h3 class="analysis-title">Análisis y Pronóstico (Informe Resumen)</h3>
                     <p class="text-sm mb-3">Segunda del programa, un Premio Maracay sobre 1.400 metros para potros y potrancas de 3 años. Es una carrera condicional para productos nacionales o nacidos en España (Made in Spain), donde varios potros buscan su primera victoria o consolidar sus recientes progresos. La distancia demandará equilibrio entre velocidad y cierta resistencia para rematar bien en la recta de meta.</p>
                     <ul class="list-none space-y-3 text-sm">
                         <li><i class="fas fa-star mr-2 text-turf-gold"></i><strong class="favorite">Ganador:</strong> <span class="horse-name">2 ALHAURIN (IRE)</span></li>
                         <li><i class="fas fa-medal mr-2 text-turf-silver"></i><strong class="place-option">Colocados:</strong> <span class="horse-name">15 TARA ROAD (IRE)</span>, <span class="horse-name">8 ETERNAL SANDS (IRE)</span></li>
                          <li><i class="fas fa-rocket mr-2 text-turf-bronze"></i><strong class="longshot">Sorpresa:</strong> <span class="horse-name">14 KAMARA (IRE)</span></li>
                     </ul>
                 </div>

                 <div class="simulation-container">
                     <button id="simulate-btn-2" class="bg-turf-rail hover:bg-opacity-80 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline mb-3 text-sm" onclick="startSimulation(2)">
                         <i class="fas fa-play mr-2"></i>Simular Carrera 2
                     </button>
                     <div id="race-track-2" class="race-track hidden">
                         <div class="finish-line"></div>
                     </div>
                      <p id="winner-info-2" class="text-center mt-2 font-semibold text-turf-green hidden"></p>
                 </div>

                 <h4 class="text-lg font-semibold text-turf-rail mb-3 mt-6">Participantes (Programa Detallado)</h4>
                 <div class="overflow-x-auto">
                      <table id="participants-2" class="min-w-full bg-white rounded-lg shadow participants-table">
                         <thead>
                              <tr><th>Nº</th><th>Caballo</th><th>Edad</th><th>KG</th><th>Jinete</th><th>Cuadra</th><th>Entrenador</th><th>Cajón</th><th class="text-center">Últ. Act.</th></tr>
                         </thead>
                         <tbody>
                            <tr onclick="showHorseModal(this, 2)"><td>1</td><td class="horse-name">AFRICAN RULER (FR) (a)(3)(8)</td><td>3a</td><td>57</td><td class="jockey-name">L. GELABERT</td><td>R. MARTIN A.</td><td class="trainer-name">ALVARO MATEOS</td><td class="text-center">1</td><td class="ult-act text-center">06,04</td></tr>
                            <tr onclick="showHorseModal(this, 2)"><td>2</td><td class="horse-name">ALHAURIN (IRE)</td><td>3a</td><td>57</td><td class="jockey-name">R. SOUSA</td><td>G. ARIZKORRETA</td><td class="trainer-name">MEDITERRANEO</td><td class="text-center">5</td><td class="ult-act text-center">03,03</td></tr>
                            <tr onclick="showHorseModal(this, 2)"><td>3</td><td class="horse-name">AÑOVER (4)(8)</td><td>3a</td><td>57</td><td class="jockey-name">S. LE QUILLEUC</td><td>J.M. OSORIO</td><td class="trainer-name">EL BERROJO</td><td class="text-center">13</td><td class="ult-act text-center">06,06,05,02,NP</td></tr>
                            <tr onclick="showHorseModal(this, 2)"><td>4</td><td class="horse-name">AS BESTAS (IRE)</td><td>3a</td><td>57</td><td class="jockey-name">B. FAYOS</td><td>O. ANAYA</td><td class="trainer-name">SALVADOR MARQUEZ</td><td class="text-center">3</td><td class="ult-act text-center">08</td></tr>
                            <tr onclick="showHorseModal(this, 2)"><td>5</td><td class="horse-name">BRISEO (FR) (5)(8)</td><td>3a</td><td>57</td><td class="jockey-name">N. DE JULIAN</td><td>ESTRELLAS DE MONTEFARO</td><td class="trainer-name">C. CERQUEIRA</td><td class="text-center">4</td><td class="ult-act text-center">05,05,05,05,05</td></tr>
                            <tr onclick="showHorseModal(this, 2)"><td>6</td><td class="horse-name">DALLAS (5)</td><td>3a</td><td>57</td><td class="jockey-name">A. SERRANO (54,5)</td><td>J. LOPEZ</td><td class="trainer-name">BERNIE</td><td class="text-center">2</td><td class="ult-act text-center">10,06,10,02,04</td></tr>
                            <tr onclick="showHorseModal(this, 2)"><td>7</td><td class="horse-name">DONENTAL (GB) (8)</td><td>3a</td><td>57</td><td class="jockey-name">C. PEREZ (55)</td><td>B. RAMA</td><td class="trainer-name">AJEDREZ RACING</td><td class="text-center">8</td><td class="ult-act text-center">03,02,05,03,04</td></tr>
                            <tr onclick="showHorseModal(this, 2)"><td>8</td><td class="horse-name">ETERNAL SANDS (IRE)</td><td>3a</td><td>57</td><td class="jockey-name">V. JANACEK</td><td>VALLADOLID</td><td class="trainer-name">G. ARIZKORRETA</td><td class="text-center">6</td><td class="ult-act text-center">02,08</td></tr>
                            <tr onclick="showHorseModal(this, 2)"><td>9</td><td class="horse-name">MANUCHEHR (GB)</td><td>3a</td><td>57</td><td class="jockey-name">R.N. VALLE</td><td>O. ANAYA</td><td class="trainer-name">REZA PAZOOKI</td><td class="text-center">7</td><td class="ult-act text-center">08,02,04,07,NP</td></tr>
                            <tr onclick="showHorseModal(this, 2)"><td>10</td><td class="horse-name">VIZCONDE (FR)</td><td>3a</td><td>57</td><td class="jockey-name">V. SEGUY (G. Roja)</td><td>A. TSERETELI</td><td class="trainer-name">MEDITERRANEO</td><td class="text-center">14</td><td class="ult-act text-center">NP</td></tr>
                            <tr onclick="showHorseModal(this, 2)"><td>11</td><td class="horse-name">DANGARA (GB)</td><td>3a</td><td>55,5</td><td class="jockey-name">L. MENDIZABAL</td><td>G. ARIZKORRETA</td><td class="trainer-name">ALEX Y SOFIA</td><td class="text-center">15</td><td class="ult-act text-center">09,NP</td></tr>
                            <tr onclick="showHorseModal(this, 2)"><td>12</td><td class="horse-name">EARTHVIEW (GB) (4)</td><td>3a</td><td>55,5</td><td class="jockey-name">G. ARGUINZONES (54,5)</td><td>CANARIAS</td><td class="trainer-name">B. RAMA</td><td class="text-center">10</td><td class="ult-act text-center">11,07</td></tr>
                            <tr onclick="showHorseModal(this, 2)"><td>13</td><td class="horse-name">INTERROGATION (3)(8)</td><td>3a</td><td>55,5</td><td class="jockey-name">H. MOUESAN</td><td>ESGUEVA</td><td class="trainer-name">T. CALLEJOS</td><td class="text-center">9</td><td class="ult-act text-center">04,07,07,03,NP</td></tr>
                            <tr onclick="showHorseModal(this, 2)"><td>14</td><td class="horse-name">KAMARA (IRE)</td><td>3a</td><td>55,5</td><td class="jockey-name">A. GUTIERREZ V.</td><td>CH. DELCHER</td><td class="trainer-name">AGRADO</td><td class="text-center">11</td><td class="ult-act text-center">03</td></tr>
                            <tr onclick="showHorseModal(this, 2)"><td>15</td><td class="horse-name">TARA ROAD (IRE)</td><td>3a</td><td>55,5</td><td class="jockey-name">V.M. VALENZUELA</td><td>IRU</td><td class="trainer-name">O. ANAYA</td><td class="text-center">16</td><td class="ult-act text-center">05,02,02,04,08</td></tr>
                            <tr onclick="showHorseModal(this, 2)"><td>16</td><td class="horse-name">ZALAMERA (IRE) (8)</td><td>3a</td><td>55,5</td><td class="jockey-name">D. SIKOROVA (54,5) (G. Amarilla)</td><td>A. SOTO</td><td class="trainer-name">MEDITERRANEO</td><td class="text-center">12</td><td class="ult-act text-center">NP,04</td></tr>
                         </tbody>
                      </table>
                 </div>
            </div>

            <div id="carrera3" class="tab-content p-4 bg-gray-50 rounded-lg shadow-inner">
                 <h2 class="text-2xl font-bold text-turf-green mb-1">3ª Carrera: Gran Premio Cimera (Poule de Potros)</h2>
                 <p class="mb-3 text-md text-turf-rail">(Categoría A) (Made in Spain criadores) - 1.600 mts.</p>
                 <div class="grid grid-cols-2 md:grid-cols-3 gap-4 mb-5 text-sm border-y py-3 bg-white rounded">
                    <div class="flex items-center"><i class="fas fa-clock mr-2 text-blue-500"></i> <strong>Hora:</strong> 12:40 h.</div>
                    <div class="flex items-center"><i class="fas fa-euro-sign mr-2 text-yellow-600"></i> <strong>Premio:</strong> 51.000 €</div>
                    <div class="flex items-center"><i class="fas fa-cloud-sun mr-2 text-sky-500"></i> <strong>Pista (Prevista):</strong> Buena / Bueno-Blando</div>
                 </div>

                 <div class="analysis-section mb-6">
                     <h3 class="analysis-title">Análisis y Pronóstico (Informe Resumen)</h3>
                     <p class="text-sm mb-3">Llegamos a una de las pruebas cumbre de la primavera: el Gran Premio Cimera, la Poule de Potros (2.000 Guineas españolas), una carrera de Categoría A sobre 1.600 metros. Es la primera joya de la Triple Corona nacional para los machos. Aquí se decide quién es el mejor potro milero de la generación. La carrera promete un ritmo selectivo.</p>
                      <ul class="list-none space-y-3 text-sm">
                         <li><i class="fas fa-star mr-2 text-turf-gold"></i><strong class="favorite">Ganador:</strong> <span class="horse-name">2 GOODMOOD (IRE)</span></li>
                         <li><i class="fas fa-medal mr-2 text-turf-silver"></i><strong class="place-option">Colocados:</strong> <span class="horse-name">5 SKYTREE (FR)</span>, <span class="horse-name">1 GAUCIN (FR)</span></li>
                          <li><i class="fas fa-rocket mr-2 text-turf-bronze"></i><strong class="longshot">Sorpresa:</strong> <span class="horse-name">10 YO MAURO (IRE)</span></li>
                     </ul>
                 </div>

                 <div class="simulation-container">
                     <button id="simulate-btn-3" class="bg-turf-rail hover:bg-opacity-80 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline mb-3 text-sm" onclick="startSimulation(3)">
                         <i class="fas fa-play mr-2"></i>Simular Carrera 3
                     </button>
                     <div id="race-track-3" class="race-track hidden">
                         <div class="finish-line"></div>
                     </div>
                      <p id="winner-info-3" class="text-center mt-2 font-semibold text-turf-green hidden"></p>
                 </div>

                 <h4 class="text-lg font-semibold text-turf-rail mb-3 mt-6">Participantes (Programa Detallado)</h4>
                 <div class="overflow-x-auto">
                      <table id="participants-3" class="min-w-full bg-white rounded-lg shadow participants-table">
                         <thead>
                              <tr><th>Nº</th><th>Caballo</th><th>Edad</th><th>KG</th><th>Jinete</th><th>Cuadra</th><th>Entrenador</th><th>Cajón</th><th class="text-center">Últ. Act.</th></tr>
                         </thead>
                         <tbody>
                           <tr onclick="showHorseModal(this, 3)"><td>1</td><td class="horse-name">GAUCIN (FR)</td><td>3a</td><td>57</td><td class="jockey-name">D. SIKOROVA</td><td>MEDITERRANEO</td><td class="trainer-name">A. SOTO</td><td class="text-center">1</td><td class="ult-act text-center">06,01,04,02,01</td></tr>
                            <tr onclick="showHorseModal(this, 3)"><td>2</td><td class="horse-name">GOODMOOD (IRE) (8)</td><td>3a</td><td>57</td><td class="jockey-name">R. SOUSA (G. Roja)</td><td>MEDITERRANEO</td><td class="trainer-name">A. SOTO</td><td class="text-center">7</td><td class="ult-act text-center">01,03,01,03,01</td></tr>
                            <tr onclick="showHorseModal(this, 3)"><td>3</td><td class="horse-name">METRO DUBAI (FR)</td><td>3a</td><td>57</td><td class="jockey-name">B. FAYOS</td><td>REZA PAZOOKI</td><td class="trainer-name">O. ANAYA</td><td class="text-center">8</td><td class="ult-act text-center">03,03,01,02,03</td></tr>
                            <tr onclick="showHorseModal(this, 3)"><td>4</td><td class="horse-name">SIR EDWARD (IRE)</td><td>3a</td><td>57</td><td class="jockey-name">L. GELABERT</td><td>CORREDORES AGRUPADOS</td><td class="trainer-name">J. LOPEZ</td><td class="text-center">5</td><td class="ult-act text-center">03,NP,05,02,05</td></tr>
                            <tr onclick="showHorseModal(this, 3)"><td>5</td><td class="horse-name">SKYTREE (FR)</td><td>3a</td><td>57</td><td class="jockey-name">V. SEGUY</td><td>SAN JOSE</td><td class="trainer-name">A. TSERETELI</td><td class="text-center">6</td><td class="ult-act text-center">01,01</td></tr>
                            <tr onclick="showHorseModal(this, 3)"><td>6</td><td class="horse-name">SOLTAN GATSBY (FR) (8)</td><td>3a</td><td>57</td><td class="jockey-name">V. JANACEK</td><td>YEGUADA ROCK</td><td class="trainer-name">G. ARIZKORRETA</td><td class="text-center">4</td><td class="ult-act text-center">04,06,02,01,05</td></tr>
                            <tr onclick="showHorseModal(this, 3)"><td>7</td><td class="horse-name">STAR ONE (FR)</td><td>3a</td><td>57</td><td class="jockey-name">N. DE JULIAN</td><td>ESTRELLAS DE MONTEFARO</td><td class="trainer-name">C. CERQUEIRA</td><td class="text-center">11</td><td class="ult-act text-center">05,01,07</td></tr>
                            <tr onclick="showHorseModal(this, 3)"><td>8</td><td class="horse-name">TANAGER (GB) (8)</td><td>3a</td><td>57</td><td class="jockey-name">A. GUTIERREZ V.</td><td>EL ROQUE CANARIAS</td><td class="trainer-name">F. JIMENEZ</td><td class="text-center">3</td><td class="ult-act text-center">09,10,12,03,03</td></tr>
                            <tr onclick="showHorseModal(this, 3)"><td>9</td><td class="horse-name">WELLINGTON PREMIER (FR) (8)</td><td>3a</td><td>57</td><td class="jockey-name">S. LE QUILLEUC</td><td>ASIER SANCHEZ</td><td class="trainer-name">M. ALONSO R.</td><td class="text-center">10</td><td class="ult-act text-center">04,04,06,01,03</td></tr>
                            <tr onclick="showHorseModal(this, 3)"><td>10</td><td class="horse-name">YO MAURO (IRE)</td><td>3a</td><td>57</td><td class="jockey-name">R.N. VALLE</td><td>PEQUES</td><td class="trainer-name">G. ARIZKORRETA</td><td class="text-center">2</td><td class="ult-act text-center">02,02,01</td></tr>
                            <tr onclick="showHorseModal(this, 3)"><td>11</td><td class="horse-name">YOGUI (FR)</td><td>3a</td><td>57</td><td class="jockey-name">L. MENDIZABAL</td><td>YEGUADA AGE</td><td class="trainer-name">G. ARIZKORRETA</td><td class="text-center">9</td><td class="ult-act text-center">02,04,02</td></tr>
                         </tbody>
                      </table>
                 </div>
            </div>

            <div id="carrera4" class="tab-content p-4 bg-gray-50 rounded-lg shadow-inner">
                 <h2 class="text-2xl font-bold text-turf-green mb-1">4ª Carrera: Premio Octaviano y Gonzalo Griñán</h2>
                 <p class="mb-3 text-md text-turf-rail">(Hándicap Dividido 1ª parte) (Made in Spain) - 2.200 mts.</p>
                 <div class="grid grid-cols-2 md:grid-cols-3 gap-4 mb-5 text-sm border-y py-3 bg-white rounded">
                    <div class="flex items-center"><i class="fas fa-clock mr-2 text-blue-500"></i> <strong>Hora:</strong> 13:15 h.</div>
                    <div class="flex items-center"><i class="fas fa-euro-sign mr-2 text-yellow-600"></i> <strong>Premio:</strong> 11.050 €</div>
                    <div class="flex items-center"><i class="fas fa-cloud-sun mr-2 text-sky-500"></i> <strong>Pista (Prevista):</strong> Buena / Bueno-Blando</div>
                 </div>

                 <div class="analysis-section mb-6">
                     <h3 class="analysis-title">Análisis y Pronóstico (Informe Resumen)</h3>
                     <p class="text-sm mb-3">Esta es la primera parte del hándicap dividido, con los ejemplares de mayor valor. El nivel competitivo sube. La estrategia de peso vuelve a ser fundamental en 2.200m, posiblemente blandos. Se esperan llegadas muy apretadas.</p>
                      <ul class="list-none space-y-3 text-sm">
                         <li><i class="fas fa-star mr-2 text-turf-gold"></i><strong class="favorite">Ganador:</strong> <span class="horse-name">4 TRADE HONOUR (FR)</span></li>
                         <li><i class="fas fa-medal mr-2 text-turf-silver"></i><strong class="place-option">Colocados:</strong> <span class="horse-name">6 LUNA ROSSA</span>, <span class="horse-name">2 RUESGA (IRE)</span></li>
                          <li><i class="fas fa-rocket mr-2 text-turf-bronze"></i><strong class="longshot">Sorpresa:</strong> <span class="horse-name">12 XERAC (IRE)</span></li>
                     </ul>
                 </div>

                 <div class="simulation-container">
                     <button id="simulate-btn-4" class="bg-turf-rail hover:bg-opacity-80 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline mb-3 text-sm" onclick="startSimulation(4)">
                         <i class="fas fa-play mr-2"></i>Simular Carrera 4
                     </button>
                     <div id="race-track-4" class="race-track hidden">
                         <div class="finish-line"></div>
                     </div>
                      <p id="winner-info-4" class="text-center mt-2 font-semibold text-turf-green hidden"></p>
                 </div>

                 <h4 class="text-lg font-semibold text-turf-rail mb-3 mt-6">Participantes (Programa Detallado)</h4>
                 <div class="overflow-x-auto">
                      <table id="participants-4" class="min-w-full bg-white rounded-lg shadow participants-table">
                         <thead>
                              <tr><th>Nº</th><th>Caballo</th><th>Edad</th><th>KG</th><th>Jinete</th><th>Cuadra</th><th>Entrenador</th><th>Cajón</th><th class="text-center">Últ. Act.</th></tr>
                         </thead>
                         <tbody>
                            <tr onclick="showHorseModal(this, 4)"><td>1</td><td class="horse-name">MONEYMAN (GB)</td><td>6a</td><td>63</td><td class="jockey-name">A. GUTIERREZ V.</td><td>BABIECA</td><td class="trainer-name">J.L. MAROTO</td><td class="text-center">10</td><td class="ult-act text-center">NP,NP,03,02,08</td></tr>
                            <tr onclick="showHorseModal(this, 4)"><td>2</td><td class="horse-name">RUESGA (IRE)</td><td>4a</td><td>61,5</td><td class="jockey-name">V.M. VALENZUELA</td><td>ORO</td><td class="trainer-name">A. TSERETELI</td><td class="text-center">1</td><td class="ult-act text-center">06,01,01,04,03</td></tr>
                            <tr onclick="showHorseModal(this, 4)"><td>3</td><td class="horse-name">VEREMOS (GB)</td><td>6a</td><td>61</td><td class="jockey-name">B. FAYOS</td><td>AFRICA</td><td class="trainer-name">J.M. OSORIO</td><td class="text-center">8</td><td class="ult-act text-center">07,08,05,03,03</td></tr>
                            <tr onclick="showHorseModal(this, 4)"><td>4</td><td class="horse-name">TRADE HONOUR (FR)</td><td>4a</td><td>59,5</td><td class="jockey-name">V. JANACEK</td><td>PINNA FIDELIS</td><td class="trainer-name">G. ARIZKORRETA</td><td class="text-center">11</td><td class="ult-act text-center">06,04,01,02,02</td></tr>
                            <tr onclick="showHorseModal(this, 4)"><td>5</td><td class="horse-name">NAT IMPACT (GB) (8)</td><td>4a</td><td>59,5</td><td class="jockey-name">D. SIKOROVA (58,5) (G. Blanca)</td><td>AFRICA</td><td class="trainer-name">J.M. OSORIO</td><td class="text-center">4</td><td class="ult-act text-center">05,07,05,07</td></tr>
                            <tr onclick="showHorseModal(this, 4)"><td>6</td><td class="horse-name">LUNA ROSSA</td><td>4a</td><td>59</td><td class="jockey-name">R. SOUSA</td><td>DELTA</td><td class="trainer-name">A. TSERETELI</td><td class="text-center">12</td><td class="ult-act text-center">02,01,02,03,04</td></tr>
                            <tr onclick="showHorseModal(this, 4)"><td>7</td><td class="horse-name">CHENER (FR) (3)</td><td>5a</td><td>58,5</td><td class="jockey-name">J. GELABERT</td><td>PALCO 7</td><td class="trainer-name">J.L. MAROTO</td><td class="text-center">6</td><td class="ult-act text-center">09,04,03,06,01</td></tr>
                            <tr onclick="showHorseModal(this, 4)"><td>8</td><td class="horse-name">FLOREA (FR) (a)(8)</td><td>4a</td><td>57,5</td><td class="jockey-name">L. MENDIZABAL</td><td>COPIHUE</td><td class="trainer-name">J. HORCAJADA</td><td class="text-center">3</td><td class="ult-act text-center">03,02,01,04,07</td></tr>
                            <tr onclick="showHorseModal(this, 4)"><td>9</td><td class="horse-name">SUN KING (IRE)</td><td>6a</td><td>57,5</td><td class="jockey-name">V. ALONSO V. (56,5)</td><td>BORRIQUITO COMO TURF</td><td class="trainer-name">CH. DELCHER</td><td class="text-center">7</td><td class="ult-act text-center">NP,03,03,NP,04</td></tr>
                            <tr onclick="showHorseModal(this, 4)"><td>10</td><td class="horse-name">MYSTERY LAND (3)</td><td>4a</td><td>57,5</td><td class="jockey-name">C. PEREZ (55,5)</td><td>BOLAK</td><td class="trainer-name">M. AUGELLI</td><td class="text-center">5</td><td class="ult-act text-center">04,NP,05,07,01</td></tr>
                            <tr onclick="showHorseModal(this, 4)"><td>11</td><td class="horse-name">TRAMPAS (5)(8)</td><td>4a</td><td>55</td><td class="jockey-name">A. MARTINEZ (54)</td><td>YEPES MONTANCHEZ</td><td class="trainer-name">E. ARGUINZONES</td><td class="text-center">2</td><td class="ult-act text-center">08,17,09,09,07</td></tr>
                            <tr onclick="showHorseModal(this, 4)"><td>12</td><td class="horse-name">XERAC (IRE) (5)</td><td>4a</td><td>54,5</td><td class="jockey-name">R.N. VALLE</td><td>YEGUADA AGE</td><td class="trainer-name">G. ARIZKORRETA</td><td class="text-center">9</td><td class="ult-act text-center">06,04,03,03,05</td></tr>
                         </tbody>
                      </table>
                 </div>
            </div>

            <div id="carrera5" class="tab-content p-4 bg-gray-50 rounded-lg shadow-inner">
                 <h2 class="text-2xl font-bold text-turf-green mb-1">5ª Carrera: Gran Premio Valderas (Poule de Potrancas)</h2>
                 <p class="mb-3 text-md text-turf-rail">(Categoría A) (Made in Spain criadores) - 1.600 mts.</p>
                 <div class="grid grid-cols-2 md:grid-cols-3 gap-4 mb-5 text-sm border-y py-3 bg-white rounded">
                    <div class="flex items-center"><i class="fas fa-clock mr-2 text-blue-500"></i> <strong>Hora:</strong> 13:50 h.</div>
                    <div class="flex items-center"><i class="fas fa-euro-sign mr-2 text-yellow-600"></i> <strong>Premio:</strong> 51.000 €</div>
                    <div class="flex items-center"><i class="fas fa-cloud-sun mr-2 text-sky-500"></i> <strong>Pista (Prevista):</strong> Buena / Bueno-Blando</div>
                 </div>

                 <div class="analysis-section mb-6">
                     <h3 class="analysis-title">Análisis y Pronóstico (Informe Resumen)</h3>
                     <p class="text-sm mb-3">Turno de las potrancas de 3 años en su Gran Premio: el G.P. Valderas (1.000 Guineas españolas). Reúne a las mejores potrancas de la generación. Tradicionalmente, esta prueba suele tener grandes favoritas pero también ha dado sorpresas. Lote numeroso y muy competitivo.</p>
                      <ul class="list-none space-y-3 text-sm">
                         <li><i class="fas fa-star mr-2 text-turf-gold"></i><strong class="favorite">Ganador:</strong> <span class="horse-name">8 LEVHAIMUR (GB)</span></li>
                         <li><i class="fas fa-medal mr-2 text-turf-silver"></i><strong class="place-option">Colocados:</strong> <span class="horse-name">5 FICTION (GB)</span>, <span class="horse-name">10 OCTANS</span></li>
                          <li><i class="fas fa-rocket mr-2 text-turf-bronze"></i><strong class="longshot">Sorpresa:</strong> <span class="horse-name">4 ECOLOGY (IRE)</span></li>
                     </ul>
                 </div>

                 <div class="simulation-container">
                     <button id="simulate-btn-5" class="bg-turf-rail hover:bg-opacity-80 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline mb-3 text-sm" onclick="startSimulation(5)">
                         <i class="fas fa-play mr-2"></i>Simular Carrera 5
                     </button>
                     <div id="race-track-5" class="race-track hidden">
                         <div class="finish-line"></div>
                     </div>
                      <p id="winner-info-5" class="text-center mt-2 font-semibold text-turf-green hidden"></p>
                 </div>

                 <h4 class="text-lg font-semibold text-turf-rail mb-3 mt-6">Participantes (Programa Detallado)</h4>
                 <div class="overflow-x-auto">
                      <table id="participants-5" class="min-w-full bg-white rounded-lg shadow participants-table">
                         <thead>
                              <tr><th>Nº</th><th>Caballo</th><th>Edad</th><th>KG</th><th>Jinete</th><th>Cuadra</th><th>Entrenador</th><th>Cajón</th><th class="text-center">Últ. Act.</th></tr>
                         </thead>
                         <tbody>
                            <tr onclick="showHorseModal(this, 5)"><td>1</td><td class="horse-name">ANNIE'S SONG (FR) (4)(8)</td><td>3a</td><td>57</td><td class="jockey-name">H. MOUESAN</td><td>ZAR</td><td class="trainer-name">C. HUESA</td><td class="text-center">5</td><td class="ult-act text-center">06,03,07,07</td></tr>
                            <tr onclick="showHorseModal(this, 5)"><td>2</td><td class="horse-name">BATED DREAM (IRE)</td><td>3a</td><td>57</td><td class="jockey-name">D. SIKOROVA</td><td>SPORT HG</td><td class="trainer-name">O. ANAYA</td><td class="text-center">1</td><td class="ult-act text-center">04,01,01,06,05</td></tr>
                            <tr onclick="showHorseModal(this, 5)"><td>3</td><td class="horse-name">CASTING A SPELL (IRE) (8)</td><td>3a</td><td>57</td><td class="jockey-name">N. DE JULIAN</td><td>GIULIA</td><td class="trainer-name">M. AUGELLI</td><td class="text-center">9</td><td class="ult-act text-center">03,04,03,06,03</td></tr>
                            <tr onclick="showHorseModal(this, 5)"><td>4</td><td class="horse-name">ECOLOGY (IRE)</td><td>3a</td><td>57</td><td class="jockey-name">B. FAYOS</td><td>FRIENDS & HORSES</td><td class="trainer-name">M. AUGELLI</td><td class="text-center">13</td><td class="ult-act text-center">01,01,08,08,06</td></tr>
                            <tr onclick="showHorseModal(this, 5)"><td>5</td><td class="horse-name">FICTION (GB)</td><td>3a</td><td>57</td><td class="jockey-name">R. SOUSA</td><td>MEDITERRANEO</td><td class="trainer-name">A. TSERETELI</td><td class="text-center">2</td><td class="ult-act text-center">07,02,01,01,01</td></tr>
                            <tr onclick="showHorseModal(this, 5)"><td>6</td><td class="horse-name">GHOST RUN (GB)</td><td>3a</td><td>57</td><td class="jockey-name">L. MENDIZABAL</td><td>YEGUADA ROCIO</td><td class="trainer-name">G. ARIZKORRETA</td><td class="text-center">8</td><td class="ult-act text-center">10,07,01,08,04</td></tr>
                            <tr onclick="showHorseModal(this, 5)"><td>7</td><td class="horse-name">LADY COCODY (FR)</td><td>3a</td><td>57</td><td class="jockey-name">S. LE QUILLEUC</td><td>AFFSL</td><td class="trainer-name">F. RODRIGUEZ</td><td class="text-center">11</td><td class="ult-act text-center">05,01,03,02</td></tr>
                            <tr onclick="showHorseModal(this, 5)"><td>8</td><td class="horse-name">LEVHAIMUR (GB) (4)</td><td>3a</td><td>57</td><td class="jockey-name">A. GUTIERREZ V.</td><td>JCA RACING</td><td class="trainer-name">G. ARIZKORRETA</td><td class="text-center">7</td><td class="ult-act text-center">02,02,01,04,01</td></tr>
                            <tr onclick="showHorseModal(this, 5)"><td>9</td><td class="horse-name">MARMARA (GB)</td><td>3a</td><td>57</td><td class="jockey-name">R.N. VALLE</td><td>REZA PAZOOKI</td><td class="trainer-name">O. ANAYA</td><td class="text-center">6</td><td class="ult-act text-center">07,01,02</td></tr>
                            <tr onclick="showHorseModal(this, 5)"><td>10</td><td class="horse-name">OCTANS</td><td>3a</td><td>57</td><td class="jockey-name">V. JANACEK (G. Verde)</td><td>YEGUADA ROCIO</td><td class="trainer-name">G. ARIZKORRETA</td><td class="text-center">3</td><td class="ult-act text-center">02,02,01,01,05</td></tr>
                            <tr onclick="showHorseModal(this, 5)"><td>11</td><td class="horse-name">THEYKNOWWEKNOW (IRE)</td><td>3a</td><td>57</td><td class="jockey-name">V. SEGUY</td><td>SAN JOSE</td><td class="trainer-name">A. TSERETELI</td><td class="text-center">12</td><td class="ult-act text-center">05,01,02,02</td></tr>
                            <tr onclick="showHorseModal(this, 5)"><td>12</td><td class="horse-name">VOZPORNOCHE (IRE)</td><td>3a</td><td>57</td><td class="jockey-name">J. GELABERT</td><td>BERING</td><td class="trainer-name">A. TSERETELI</td><td class="text-center">4</td><td class="ult-act text-center">03,01,03,01</td></tr>
                            <tr onclick="showHorseModal(this, 5)"><td>13</td><td class="horse-name">ZAMBRA (FR)</td><td>3a</td><td>57</td><td class="jockey-name">G. TROLLEY DE PREVAUX</td><td>LAC INTERNACIONAL</td><td class="trainer-name">A. SOTO</td><td class="text-center">10</td><td class="ult-act text-center">03,06,04,04,01</td></tr>
                         </tbody>
                      </table>
                 </div>
            </div>

            <div id="carrera6" class="tab-content p-4 bg-gray-50 rounded-lg shadow-inner">
                 <h2 class="text-2xl font-bold text-turf-green mb-1">6ª Carrera: Premio Realeza</h2>
                 <p class="mb-3 text-md text-turf-rail">(Categoría C) (Hándicap Ref: 3a:45,5; 4a+:41) (Made in Spain) - 1.000 mts. Línea Recta</p>
                 <div class="grid grid-cols-2 md:grid-cols-3 gap-4 mb-5 text-sm border-y py-3 bg-white rounded">
                    <div class="flex items-center"><i class="fas fa-clock mr-2 text-blue-500"></i> <strong>Hora:</strong> 14:25 h.</div>
                    <div class="flex items-center"><i class="fas fa-euro-sign mr-2 text-yellow-600"></i> <strong>Premio:</strong> 13.600 €</div>
                    <div class="flex items-center"><i class="fas fa-cloud-sun mr-2 text-sky-500"></i> <strong>Pista (Prevista):</strong> Buena / Bueno-Blando</div>
                 </div>

                 <div class="analysis-section mb-6">
                     <h3 class="analysis-title">Análisis y Pronóstico (Informe Resumen)</h3>
                     <p class="text-sm mb-3">La jornada cierra con un Hándicap Categoría C en 1.000 metros (línea recta). Puro sprint directo, sin curvas, donde la velocidad explosiva es fundamental. Mezcla de ejemplares jóvenes ligeros y viejos sprinters contrastados. La recta de LZ es exigente, con ligera pendiente ascendente al final.</p>
                      <ul class="list-none space-y-3 text-sm">
                         <li><i class="fas fa-star mr-2 text-turf-gold"></i><strong class="favorite">Ganador:</strong> <span class="horse-name">3 ASSEMBLY CALL (IRE)</span></li>
                         <li><i class="fas fa-medal mr-2 text-turf-silver"></i><strong class="place-option">Colocados:</strong> <span class="horse-name">7 BE TRUE (FR)</span>, <span class="horse-name">2 ORIGEN (IRE)</span></li>
                          <li><i class="fas fa-rocket mr-2 text-turf-bronze"></i><strong class="longshot">Sorpresa:</strong> <span class="horse-name">9 SIR GEOFF MORGAN (IRE)</span></li>
                     </ul>
                 </div>

                 <div class="simulation-container">
                     <button id="simulate-btn-6" class="bg-turf-rail hover:bg-opacity-80 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline mb-3 text-sm" onclick="startSimulation(6)">
                         <i class="fas fa-play mr-2"></i>Simular Carrera 6
                     </button>
                     <div id="race-track-6" class="race-track hidden">
                         <div class="finish-line"></div>
                     </div>
                      <p id="winner-info-6" class="text-center mt-2 font-semibold text-turf-green hidden"></p>
                 </div>

                 <h4 class="text-lg font-semibold text-turf-rail mb-3 mt-6">Participantes (Programa Detallado)</h4>
                 <div class="overflow-x-auto">
                      <table id="participants-6" class="min-w-full bg-white rounded-lg shadow participants-table">
                         <thead>
                              <tr><th>Nº</th><th>Caballo</th><th>Edad</th><th>KG</th><th>Jinete</th><th>Cuadra</th><th>Entrenador</th><th>Cajón</th><th class="text-center">Últ. Act.</th></tr>
                         </thead>
                         <tbody>
                            <tr onclick="showHorseModal(this, 6)"><td>1</td><td class="horse-name">PARTING GLASS (IRE) (8)</td><td>5a</td><td>63</td><td class="jockey-name">B. FAYOS</td><td>ORO MOLIO</td><td class="trainer-name">O. ANAYA</td><td class="text-center">8</td><td class="ult-act text-center">09,06,02,01,06</td></tr>
                            <tr onclick="showHorseModal(this, 6)"><td>2</td><td class="horse-name">ORIGEN (IRE) (8)</td><td>4a</td><td>61</td><td class="jockey-name">J. GELABERT</td><td>SALVADOR MARQUEZ</td><td class="trainer-name">O. ANAYA</td><td class="text-center">7</td><td class="ult-act text-center">04,01,NP,01,02</td></tr>
                            <tr onclick="showHorseModal(this, 6)"><td>3</td><td class="horse-name">ASSEMBLY CALL (IRE)</td><td>4a</td><td>60,5</td><td class="jockey-name">J.C. DIESTRA</td><td>MALLOW GRAN CANARIA</td><td class="trainer-name">O. ANAYA</td><td class="text-center">5</td><td class="ult-act text-center">01,10,01,01,02</td></tr>
                            <tr onclick="showHorseModal(this, 6)"><td>4</td><td class="horse-name">ABACUR (FR)</td><td>4a</td><td>60</td><td class="jockey-name">V. JANACEK</td><td>SAN JOSE</td><td class="trainer-name">A. TSERETELI</td><td class="text-center">3</td><td class="ult-act text-center">05,01,03,03</td></tr>
                            <tr onclick="showHorseModal(this, 6)"><td>5</td><td class="horse-name">JUNGLE FEVER (IRE) (8)</td><td>5a</td><td>59,5</td><td class="jockey-name">R.N. VALLE</td><td>TEIVAN TENERIFE</td><td class="trainer-name">O. ANAYA</td><td class="text-center">1</td><td class="ult-act text-center">04,05,02,01,04</td></tr>
                            <tr onclick="showHorseModal(this, 6)"><td>6</td><td class="horse-name">ALL IS FAIR (IRE)</td><td>4a</td><td>59</td><td class="jockey-name">V.M. VALENZUELA</td><td>CARBIAL</td><td class="trainer-name">O. ANAYA</td><td class="text-center">4</td><td class="ult-act text-center">07,04,09,01,08</td></tr>
                            <tr onclick="showHorseModal(this, 6)"><td>7</td><td class="horse-name">BE TRUE (FR) (5)(8)</td><td>4a</td><td>58,5</td><td class="jockey-name">R. SOUSA</td><td>MEDITERRANEO</td><td class="trainer-name">A. SOTO</td><td class="text-center">10</td><td class="ult-act text-center">01,02,03,07,02</td></tr>
                            <tr onclick="showHorseModal(this, 6)"><td>8</td><td class="horse-name">FRED ON FIRE (IRE)</td><td>3a</td><td>55</td><td class="jockey-name">D. SIKOROVA (G. Roja)</td><td>ORO MOLIO</td><td class="trainer-name">O. ANAYA</td><td class="text-center">9</td><td class="ult-act text-center">08,04,01,11,12</td></tr>
                            <tr onclick="showHorseModal(this, 6)"><td>9</td><td class="horse-name">SIR GEOFF MORGAN (IRE)</td><td>3a</td><td>52</td><td class="jockey-name">C. PEREZ</td><td>SOÑADOR</td><td class="trainer-name">B. RAMA</td><td class="text-center">2</td><td class="ult-act text-center">07,01,01,09,07</td></tr>
                            <tr onclick="showHorseModal(this, 6)"><td>10</td><td class="horse-name">BERSERKER EXTREM</td><td>4a</td><td>52</td><td class="jockey-name">V. ALONSO V.</td><td>HARAS EXTREM</td><td class="trainer-name">A. GOMEZ</td><td class="text-center">6</td><td class="ult-act text-center">06,05,05,16,07</td></tr>
                         </tbody>
                      </table>
                 </div>
            </div>

            <div id="paddock" class="tab-content p-4 bg-gray-50 rounded-lg shadow-inner">
                 <h2 class="text-2xl font-bold text-turf-green mb-4"><i class="fas fa-binoculars mr-2"></i>Guía de Observación en el Paddock</h2>
                 <p class="mb-4 text-sm">Una parte fundamental del análisis antes de las carreras es la observación directa de los caballos en el paddock. Un ojo atento puede detectar señales sobre el estado físico y mental de cada ejemplar en los minutos previos a competir. Aquí van algunos consejos prácticos y aspectos clave a tener en cuenta:</p>
                 <div class="space-y-4 text-sm">
                     <div>
                         <h4 class="font-semibold text-turf-rail">1. Aspecto físico general:</h4>
                         <p>Fijarse en el pelaje (brillante = salud), musculatura (definida, sin exceso de grasa ni delgadez extrema), y si lleva vendajes (pueden ser preventivos o indicar molestias).</p>
                     </div>
                     <div>
                         <h4 class="font-semibold text-turf-rail">2. Sudoración y temperatura:</h4>
                         <p>Un ligero brillo ("sudor de seda") es normal. Sudores excesivos, espuma blanca abundante (especialmente en cuello/grupa) o respiración muy agitada en reposo son señales de nerviosismo o estrés.</p>
                     </div>
                     <div>
                         <h4 class="font-semibold text-turf-rail">3. Comportamiento y actitud (Paso):</h4>
                         <p>Un paso largo, elástico y seguro indica soltura. Caminar rígido, corto o con cojera (incluso leve al girar) son malas señales. Orejas móviles y atentas = buen ánimo; orejas pegadas atrás = enfado/estrés.</p>
                     </div>
                     <div>
                         <h4 class="font-semibold text-turf-rail">4. Relación con el mozo y nivel de nervios:</h4>
                         <p>Un caballo tranquilo camina relajado al lado del mozo. Si tira, da tirones, cabriolas, intenta morder o cocear, muestra nerviosismo excesivo que gasta energía. Un poco de brío controlado es bueno; el descontrol o el pánico, no.</p>
                     </div>
                     <div>
                         <h4 class="font-semibold text-turf-rail">5. Señales Positivas vs. Alarma (Resumen):</h4>
                         <p><strong>Positivo:</strong> Pelaje brillante, músculos definidos, sudor ligero, paso ágil, orejas atentas, mirada viva, actitud calmada con brío.</p>
                         <p><strong>Alarma:</strong> Sudor abundante/espumoso, respiración acelerada, mirada perdida/nerviosa, orejas aplastadas, paso tosco/rígido/cojera, comportamiento indisciplinado.</p>
                     </div>
                 </div>
                  <p class="mt-4 text-xs italic text-gray-600">Combinar estas observaciones con el análisis de la forma y los datos del programa proporciona la visión más completa.</p>
             </div>

            <div id="leyenda" class="tab-content p-4 bg-gray-50 rounded-lg shadow-inner">
                  <h2 class="text-2xl font-bold text-turf-green mb-4"><i class="fas fa-book-open mr-2"></i>Leyenda y Tipos de Apuesta</h2>
                  <div class="grid md:grid-cols-2 gap-6">
                      <div>
                          <h3 class="text-lg font-semibold text-turf-rail mb-2">Símbolos y Abreviaturas</h3>
                          <div class="space-y-3 text-sm">
                              <p><strong>Equipamiento:</strong></p>
                              <ul class="list-disc list-inside ml-4">
                                 <li><strong>(3):</strong> Correrá con carrilleras.</li>
                                 <li><strong>(4):</strong> Utilizará tapones.</li>
                                 <li><strong>(5):</strong> Correrá con anteojeras.</li>
                                 <li><strong>(8):</strong> Correrá con la lengua atada.</li>
                              </ul>
                               <p><strong>Jinetes y Pesos:</strong></p>
                              <ul class="list-disc list-inside ml-4">
                                 <li><strong>(X):</strong> Peso real del jockey si hay descargo/recargo. Ej: <span class="jockey-name">G. ARGUINZONES (60)</span>.</li>
                                 <li><strong>(G. Color):</strong> Color de la gorra. Ej: <span class="jockey-name">D. SIKOROVA (G. Blanca)</span>.</li>
                              </ul>
                               <p><strong>Otros:</strong></p>
                               <ul class="list-disc list-inside ml-4">
                                 <li><strong>(a):</strong> Caballo asimilado.</li>
                                 <li><strong>KG:</strong> Peso asignado.</li>
                                 <li><strong>Cajón:</strong> Puesto de salida.</li>
                                 <li><strong>Últ. Act.:</strong> Últimas actuaciones (izq.=reciente).</li>
                                 <li><strong>NP:</strong> No Participó.</li>
                                 <li><strong>C, Qdo, Ddo, Dto, Desc:</strong> Incidencias (Caído, Quedado, Desmontado, Distanciado, Descalificado).</li>
                                 <li><strong>Cat.:</strong> Categoría (A=Mayor nivel).</li>
                              </ul>
                          </div>
                      </div>
                      <div>
                          <h3 class="text-lg font-semibold text-turf-rail mb-2">Tipos de Apuesta Comunes</h3>
                           <ul class="list-none space-y-3 text-sm">
                               <li><strong><i class="fas fa-horse mr-1 text-turf-gold"></i> Ganador:</strong> Apuesta al caballo que crees que ganará la carrera. Es la apuesta más sencilla.</li>
                               <li><strong><i class="fas fa-medal mr-1 text-turf-silver"></i> Colocado:</strong> Apuesta a que un caballo terminará entre los primeros puestos (normalmente 1º, 2º o 3º, dependiendo del número de participantes). Menor riesgo que 'Ganador', pero menor dividendo.</li>
                               <li><strong><i class="fas fa-arrows-alt-h mr-1 text-blue-500"></i> Gemela:</strong> Apuesta a los dos caballos que terminarán 1º y 2º. Hay dos tipos:
                                   <ul class="list-disc list-inside ml-4 mt-1">
                                       <li><strong>Exacta:</strong> Debes acertar el orden exacto (1º y 2º).</li>
                                       <li><strong>Reversible/Doble:</strong> Acertar los dos primeros sin importar el orden.</li>
                                   </ul>
                               </li>
                               <li><strong><i class="fas fa-cubes mr-1 text-green-600"></i> Trío:</strong> Apuesta a los tres caballos que terminarán 1º, 2º y 3º en el orden exacto. Es más difícil, pero ofrece dividendos más altos.</li>
                               <li><strong><i class="fas fa-layer-group mr-1 text-purple-600"></i> Pick 4 / Quíntuple Plus:</strong> Apuestas combinadas que requieren acertar los ganadores de varias carreras consecutivas (4 o 5 respectivamente). Muy difíciles, pero con botes potencialmente muy grandes.</li>
                           </ul>
                           <p class="text-xs italic mt-3 text-gray-600">Consulta siempre las condiciones específicas de cada apuesta en las taquillas o plataformas oficiales del hipódromo.</p>
                      </div>
                  </div>
             </div>

        </div> <footer>
            <p>Guía desarrollada por: <strong>Adrián Alcaide</strong></p>
            <p>Basado en el programa oficial y el informe resumen del Hipódromo de la Zarzuela para el 27/04/2025.</p>
            <p class="text-xs mt-1">Recuerda que las carreras de caballos conllevan riesgos. Apuesta con responsabilidad.</p>
        </footer>

    </div> <div id="horseModal" class="modal-overlay" onclick="closeModalOutside(event)">
        <div class="modal-content">
            <button class="modal-close-btn" onclick="closeModal()">&times;</button>
            <h3 id="modalHorseName" class="modal-horse-title">Nombre del Caballo</h3>
            <div class="modal-detail-grid">
                <div class="modal-detail-item"><strong>Número:</strong> <span id="modalHorseNum"></span></div>
                <div class="modal-detail-item"><strong>Edad:</strong> <span id="modalHorseAge"></span></div>
                <div class="modal-detail-item"><strong>Peso (KG):</strong> <span id="modalHorseKg"></span></div>
                <div class="modal-detail-item"><strong>Jinete:</strong> <span id="modalHorseJockey"></span></div>
                <div class="modal-detail-item"><strong>Cuadra:</strong> <span id="modalHorseCuadra"></span></div>
                <div class="modal-detail-item"><strong>Entrenador:</strong> <span id="modalHorseTrainer"></span></div>
                <div class="modal-detail-item"><strong>Cajón:</strong> <span id="modalHorseCajon"></span></div>
                <div class="modal-detail-item"><strong>Últ. Act.:</strong> <span id="modalHorseUltAct" class="ult-act"></span></div>
                <div class="modal-detail-item modal-equipamiento" style="grid-column: 1 / -1;">
                     <strong>Equipamiento:</strong> <span id="modalHorseEquip"></span>
                </div>
            </div>
             <div id="modalPickStatus" class="modal-pick-status hidden">
                </div>
             <div id="modalAnalysisSection" class="modal-analysis">
                 <h4 class="modal-analysis-title">Análisis Experto Detallado</h4>
                 <p id="modalAnalysisText" class="modal-analysis-text"></p>
             </div>
        </div>
    </div>


    <script>
        // --- Lógica para Pestañas ---
        function changeTab(event, tabId) {
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.classList.remove('tab-active', 'border-b-4', 'border-turf-green', 'transform', '-translate-y-0.5'); // Quitar estilos activos
                tab.classList.add('tab-inactive');
            });
            const selectedContent = document.getElementById(tabId);
            if (selectedContent) selectedContent.classList.add('active');
            event.currentTarget.classList.remove('tab-inactive');
            event.currentTarget.classList.add('tab-active', 'border-b-4', 'border-turf-green', 'transform', '-translate-y-0.5'); // Añadir estilos activos
        }

        // Inicializar la primera pestaña como activa al cargar
        document.addEventListener('DOMContentLoaded', () => {
            const firstTabButton = document.querySelector('.tab');
            if (firstTabButton) {
                 // No es necesario añadir clases aquí si ya están en el HTML
                 const firstTabContentId = firstTabButton.getAttribute('onclick').match(/'([^']+)'/)[1];
                 const firstTabContent = document.getElementById(firstTabContentId);
                 if(firstTabContent) firstTabContent.classList.add('active'); // Asegurar que el contenido inicial esté visible
            }
            // Añadir event listeners a las filas de las tablas para abrir el modal
            document.querySelectorAll('.participants-table tbody tr').forEach(row => {
                row.addEventListener('click', function() {
                    const tableId = this.closest('table').id;
                    const raceNum = tableId.split('-')[1];
                    showHorseModal(this, parseInt(raceNum, 10));
                });
            });
        });

        // --- Lógica para Simulación ---
        let raceIntervals = {}; // Objeto para almacenar los intervalos de cada carrera

        // Función para obtener el estatus del pick (Necesaria ANTES de usarla en getHorsesForRace y startSimulation)
         function getPickStatus(raceNum, horseName) {
            const picks = racePicks[raceNum];
            // Limpiar nombre del caballo para comparación (ignora sufijos y espacios extra)
            const normalizedHorseName = horseName.replace(/\s*\((FR|IRE|GB|a|3|4|5|8)\)/gi, '').trim();

            if (!picks) return { status: 'none', text: '', class: 'pick-none' }; // Sin pick definido

            // Función auxiliar para comparar nombres ignorando sufijos entre paréntesis
            const compareNames = (pickName, currentName) => {
                 if (!pickName) return false; // Si el pick no está definido, no comparar
                 const normalizedPickName = pickName.replace(/\s*\((FR|IRE|GB|a|3|4|5|8)\)/gi, '').trim();
                 return normalizedPickName.toUpperCase() === currentName.toUpperCase(); // Comparación insensible a mayúsculas
            };

            if (compareNames(picks.ganador, normalizedHorseName)) return { status: 'ganador', text: 'Pick Ganador (Informe Resumen)', class: 'pick-ganador' };
            if (picks.colocados.some(c => compareNames(c, normalizedHorseName))) return { status: 'colocado', text: 'Pick Colocado (Informe Resumen)', class: 'pick-colocado' };
            if (compareNames(picks.sorpresa, normalizedHorseName)) return { status: 'sorpresa', text: 'Pick Sorpresa (Informe Resumen)', class: 'pick-sorpresa' };

            return { status: 'none', text: '', class: 'pick-none' }; // No es un pick
        }

        // Obtiene los datos básicos de los caballos de una tabla específica
        function getHorsesForRace(raceNumber) {
            const tableId = `participants-${raceNumber}`;
            const table = document.getElementById(tableId);
            if (!table) return [];
            const horses = [];
            const rows = table.querySelectorAll('tbody tr');
            rows.forEach(row => {
                const numberCell = row.querySelector('td:first-child');
                const nameCell = row.querySelector('td:nth-child(2)');
                if (numberCell && nameCell) {
                     const horseNum = parseInt(numberCell.textContent.trim(), 10);
                     const horseName = nameCell.textContent.trim();
                     if (!isNaN(horseNum)) {
                         // Obtener el pick para asignar velocidad base correcta
                         const pick = getPickStatus(raceNumber, horseName);
                         let baseSpeed;
                         // Asignar velocidad base según el pick para la simulación
                         switch (pick.status) {
                             case 'ganador': baseSpeed = 1.25; break; // Más rápido
                             case 'colocado': baseSpeed = 1.15; break; // Rápido
                             case 'sorpresa': baseSpeed = 1.05; break; // Ligeramente más rápido
                             default: baseSpeed = 1.0; break; // Velocidad normal
                         }
                         horses.push({ number: horseNum, name: horseName, baseSpeed: baseSpeed });
                     }
                }
            });
            return horses; // Devuelve array de objetos {number, name, baseSpeed}
        }

        // Inicia la simulación visual de la carrera
        function startSimulation(raceNumber) {
            const trackId = `race-track-${raceNumber}`;
            const track = document.getElementById(trackId);
            const winnerInfoId = `winner-info-${raceNumber}`;
            const winnerInfo = document.getElementById(winnerInfoId);
            const button = document.getElementById(`simulate-btn-${raceNumber}`);

            if (!track || !winnerInfo || !button) return;

            // Limpiar simulación anterior si existe
            if (raceIntervals[raceNumber]) {
                clearInterval(raceIntervals[raceNumber]);
            }
            track.innerHTML = '<div class="finish-line"></div>'; // Resetear pista
            winnerInfo.classList.add('hidden');
            winnerInfo.textContent = '';
            track.classList.remove('hidden'); // Mostrar pista
            button.disabled = true; // Deshabilitar botón durante simulación

            const horsesData = getHorsesForRace(raceNumber); // Obtiene datos de caballos
             if (horsesData.length === 0) {
                winnerInfo.textContent = 'No se encontraron participantes para simular.';
                winnerInfo.classList.remove('hidden');
                button.disabled = false;
                return;
            }

            const horseElements = [];
            const trackWidth = track.offsetWidth - 40; // Ancho útil de la pista
            const finishLinePos = trackWidth + 10; // Posición de la línea de meta

            // Crear elementos visuales para cada caballo
            horsesData.forEach((horseData, index) => {
                const horseElement = document.createElement('div');
                horseElement.classList.add('horse-runner');
                horseElement.textContent = horseData.number; // Número en el círculo
                horseElement.dataset.number = horseData.number;
                horseElement.dataset.color = (horseData.number % 16) + 1; // Asignar color según número
                // Calcular posición vertical para espaciar caballos
                const totalHeight = track.offsetHeight - 20; // Altura útil
                const horseHeight = 25; // Altura del círculo
                const maxIndex = horsesData.length - 1;
                const spacing = maxIndex > 0 ? (totalHeight - (horsesData.length * horseHeight)) / maxIndex : 0; // Espacio entre caballos
                const topPosition = 10 + index * (horseHeight + spacing);
                horseElement.style.top = `${Math.max(10, Math.min(topPosition, totalHeight + 10 - horseHeight))}px`; // Asegurar que esté dentro de la pista
                horseElement.style.transform = `translateX(0px)`; // Posición inicial
                track.appendChild(horseElement);
                horseElements.push({
                    element: horseElement,
                    number: horseData.number,
                    position: 10, // Posición horizontal inicial
                    baseSpeed: horseData.baseSpeed, // Velocidad base según pick
                    randomFactor: Math.random() * 0.3 + 0.85 // Factor aleatorio para variabilidad
                });
            });

            let winnerDeclared = false;

            // Intervalo de animación
            raceIntervals[raceNumber] = setInterval(() => {
                if (winnerDeclared) { // Si ya hay ganador, detener
                     clearInterval(raceIntervals[raceNumber]);
                     button.disabled = false;
                     return;
                }
                let maxPosition = 0;
                // Mover cada caballo
                horseElements.forEach(horse => {
                    if (horse.position < finishLinePos) { // Si no ha llegado a la meta
                        // Calcular avance (velocidad base * factor aleatorio * variación pequeña)
                        horse.position += horse.baseSpeed * horse.randomFactor * (Math.random() * 0.2 + 0.9);
                        // Aplicar transformación CSS para mover el caballo
                        horse.element.style.transform = `translateX(${Math.min(horse.position - 10, trackWidth)}px)`;
                        // Comprobar si ha cruzado la meta
                        if (horse.position >= finishLinePos && !winnerDeclared) {
                            winnerDeclared = true;
                            winnerInfo.textContent = `¡Ganador Simulado: Caballo #${horse.number}!`; // Mostrar ganador
                            winnerInfo.classList.remove('hidden');
                             // Esperar un poco antes de reactivar el botón
                             setTimeout(() => {
                                clearInterval(raceIntervals[raceNumber]);
                                button.disabled = false;
                             }, 1000); // 1 segundo de espera
                        }
                    }
                    if (horse.position > maxPosition) maxPosition = horse.position; // Seguir la posición máxima
                });
            }, 30); // Intervalo corto para animación fluida (aprox. 33 fps)
        }

        // --- Lógica para el Modal ---
        // Objeto con los picks resumidos para cada carrera
        const racePicks = {
            1: { ganador: "SPANISH RULER", colocados: ["VIKING CITY", "SOFUNNY"], sorpresa: "URABA" },
            2: { ganador: "ALHAURIN", colocados: ["TARA ROAD", "ETERNAL SANDS"], sorpresa: "KAMARA" },
            3: { ganador: "GOODMOOD", colocados: ["SKYTREE", "GAUCIN"], sorpresa: "YO MAURO" },
            4: { ganador: "TRADE HONOUR", colocados: ["LUNA ROSSA", "RUESGA"], sorpresa: "XERAC" },
            5: { ganador: "LEVHAIMUR", colocados: ["FICTION", "OCTANS"], sorpresa: "ECOLOGY" },
            6: { ganador: "ASSEMBLY CALL", colocados: ["BE TRUE", "ORIGEN"], sorpresa: "SIR GEOFF MORGAN" }
        };

        // Mapeo de símbolos de equipamiento a texto descriptivo
        const equipamientoMap = {
            '(3)': 'Carrilleras', '(4)': 'Tapones', '(5)': 'Anteojeras',
            '(8)': 'Lengua Atada', '(a)': 'Asimilado'
        };

        // Objeto con el ANÁLISIS EXPERTO DETALLADO para cada caballo
        const horseAnalysisData = {
             1: { // Carrera 1
                1: "SOFUNNY (IRE): Dio un salto de calidad ganando en su reaparición este año de forma convincente. Demostró que el descanso le sentó bien. Los 63kg son un lastre considerable, especialmente si la pista está pesada, pero su clase y la monta experta de Fayos pueden compensarlo. Si repite su última actuación, estará en la pelea sí o sí. Peligroso.",
                2: "LADY WULFRUN (GB): Yegua de 4 años, también con 63 KG base, pero el descargo del jinete aprendiz G. Arguinzones (monta con 60 KG efectivos) alivia la carga. Viene de ser segunda en su penúltima, mostrando mejora. El uso de tapones y lengua atada sugiere que puede ser nerviosa o tener problemas respiratorios. Incógnita.",
                3: "ORBAYO (IRE): Veterano de 9 años, ganador en fibra en invierno. Aunque sus últimas no brillan, conoce el trazado y la distancia. Podría agradecer una pista blanda. No para ganar, pero quizás para una colocación menor si tiene el día. La monta de N. De Julián es experimentada.",
                4: "PIONINA: Potranca de 4 años en clara línea ascendente. Viene de ser segunda en un lote parecido, mostrando adaptación a la distancia. Con un peso intermedio (62,5kg) y la monta de Gelabert, puede seguir progresando y meterse en el trío. Opción interesante.",
                5: "DEMBE (FR): Caballo asimilado de 5 años con buena secuencia reciente (2º, 3º, 4º, 9º). La monta de Janacek es una garantía. Los 62kg y el cajón exterior (14) son sus contras, pero su forma es buena. A tener en cuenta para combinaciones.",
                6: "WHIM TRADE (FR): Cuatro años con 62kg y anteojeras. Sus últimas actuaciones (11, 05, 05, 06, 03) muestran alguna colocación lejana, pero necesita mejorar mucho para destacar aquí. El cajón 2 interior puede complicarle.",
                7: "VIKING CITY (FR): Veterano de 6 años que ha reverdecido laureles con una victoria y un segundo puesto recientes en Dos Hermanas. Demuestra estar en plena forma. Los 61.5kg son correctos para su valor actual. La incógnita es si mantendrá ese nivel en Madrid y en pista blanda, aunque su victoria fue en condiciones similares. Opción sólida para colocado y gemelas.",
                8: "STARSHADOW (GB): Cinco años con 61,5kg (60,5kg efectivos con Sikorova) y anteojeras. Sus últimas (04, 05, 05, 10, 03) indican que ronda los puestos remunerados, pero le falta para ganar. Podría entrar en un trío ampliado.",
                9: "SPANISH RULER (FR): Caballo muy regular de la Yeguada Valmodomus. Viene de ser 2º y 4º en lotes similares tras ganar a finales de 2024. Su consistencia es su mejor baza. Los 61kg son llevaderos en este lote y Sousa le aportará garra. Es el favorito lógico por fiabilidad, aunque no siempre remata para ganar. Ideal para apuestas a Ganador/Colocado y base de combinadas.",
                10: "MARCO AURELIO (IRE): Cuatro años con 59kg. Sus últimas (09, 04, 06, 05, 03) muestran alguna colocación, pero parece un peldaño por debajo de los favoritos. Necesita mejora.",
                11: "YIRA (FR): Yegua de 4 años con 59kg (57kg efectivos con C. Perez). Sus últimas (03, 07, 07, 05, 07) son discretas. El descargo ayuda, pero necesita un gran salto de calidad.",
                12: "MAZELTOF (FR): Veterano de 9 años que, aunque no gana, suele figurar (3º en su última). Sprinter reconvertido, en 2200m blandos podría pescar alguna colocación si el ritmo es fuerte y los de delante flaquean. Peso ligero con el descargo (56kg efectivos).",
                13: "URABA (FR): ¡Ojo a esta yegua! Su reciente segundo puesto tras cambiar a la preparación de I. Elarre fue un aviso muy serio. Baja muchísimo en la escala (54kg, aunque monta con 55kg) lo que la convierte en una amenaza real con ese peso pluma. Si la carrera tiene ritmo, su remate final puede ser letal. La sorpresa más probable.",
                14: "MAHATMA (IRE): Irregular, pero con el peso mínimo de la carrera (52.5kg, 51.5kg efectivos). Si tiene un buen recorrido y la pista ayuda a los ligeros, podría sorprender colándose en alguna combinación exótica a gran cuota. Difícil de predecir."
            },
            2: { // Carrera 2
                1: "AFRICAN RULER (FR): Potro asimilado con equipamiento completo (carrilleras, lengua atada). Sus dos actuaciones (6º, 4º) son discretas. Necesita mejorar mucho. Monta de Gelabert.",
                2: "ALHAURIN (IRE): Pupilo de Arizkorreta que ha sido tercero en sus dos únicas salidas (1600m y 1500m). Nunca ha fallado. El recorte a 1400m podría incluso beneficiarle. Con Sousa y desde el cajón 5 (no el 1 como se dijo antes), sigue siendo el candidato principal por solidez.",
                3: "AÑOVER: Potro con experiencia (5 salidas), incluyendo un segundo puesto. Viene de dos sextos. La pista blanda podría ayudarle por su posible fondo. Equipado con tapones y lengua atada. Opción secundaria.",
                4: "AS BESTAS (IRE): Debutó octavo. Es su segunda carrera. Con Fayos insistiendo y la preparación Anaya, no se puede descartar una mejora notable. Incógnita con potencial.",
                5: "BRISEO (FR): Acumula cinco quintos puestos consecutivos. Regularidad en un nivel bajo. Necesita un salto de calidad importante para figurar aquí. Equipado.",
                6: "DALLAS: Viene de mejorar a 4º. Con el descargo del aprendiz A. Serrano, saldrá muy ligero de peso (54,5kg efectivos). Podría colarse en alguna combinación si los favoritos no tienen su día. Opción de valor.",
                7: "DONENTAL (GB): De los más experimentados (5 salidas), casi siempre en la llegada (2º, 3º, 3º, 4º). Muy regular y fiable, pero quizás le falta ese 'punch' final para ganar. Ideal para buscar una colocación o incluir en tríos. Peso efectivo 55kg.",
                8: "ETERNAL SANDS (IRE): Otro Arizkorreta. Debutó segundo causando buena impresión, pero falló (8º) en su siguiente en un lote muy superior (Premio Opcional). Se le espera una rehabilitación aquí. Calidad tiene, y Janáček es garantía. Si vuelve por sus fueros, rival directo de Alhaurín.",
                9: "MANUCHEHR (GB): Irregular (8º, 2º, 4º, 7º, NP). Su segundo puesto demuestra que tiene capacidad, pero no es fiable. Preparación Anaya. Difícil.",
                10: "VIZCONDE (FR): Debutante (NP en el programa). Preparación Tsereteli y monta de Seguy. Sin referencias, es una incógnita total. Puede sorprender o no figurar.",
                11: "DANGARA (GB): Solo un noveno puesto y una no participación. Necesita demostrar mucho más. Tercera baza de Arizkorreta.",
                12: "EARTHVIEW (GB): Dos actuaciones discretas (11º, 7º). Peso efectivo bajo (54,5kg) por el descargo. Necesita gran mejora.",
                13: "INTERROGATION: Potranca con experiencia (5 salidas), incluyendo un tercer puesto. Sus últimas son más discretas (4º, 7º, 7º). Equipada. Opción menor.",
                14: "KAMARA (IRE): Solo una carrera, finalizando tercera con un buen remate. Es la gran incógnita. Si ha progresado durante el invierno bajo la preparación de Delcher, puede dar la sorpresa. Interesante para apuestas de valor.",
                15: "TARA ROAD (IRE): Preparación Anaya. Ha sido segunda en dos ocasiones en lotes similares, peleando la victoria. Su última (8º) fue discreta, quizás por pista pesada. A 1400m debería ir bien. Si tiene un recorrido limpio desde su cajón exterior (16), estará definiendo. Muy peligrosa.",
                16: "ZALAMERA (IRE): Mejoró a cuarta en su segunda salida (NP, 04). Aún 'verde', pero con margen de mejora. Peso efectivo 54,5kg. Puede seguir progresando."
            },
             3: { // Carrera 3 - GP Cimera
                1: "GAUCIN (FR): Compañero de patio de Goodmood. Ha mostrado una gran progresión, siendo segundo en la preparatoria (detrás de Goodmood) y ganando después con solvencia. Muy en forma y con garra. La monta de Sikorova es competente. Desde el cajón 9, buscará rematar por fuera. Tercero en discordia claro.",
                2: "GOODMOOD (IRE): El caballo a batir por historial reciente. Tres victorias en sus últimas cinco, incluyendo el Opcional batiendo a Gaucín. Demuestra clase, remate y adaptación a diferentes ritmos y terrenos (ganó en pesado). Conoce la milla y Sousa le entiende a la perfección. Cajón 6 ideal. Favorito sólido.",
                3: "METRO DUBAI (FR): Ganador del Criterium de invierno (arena). Demostró en la preparatoria (3º) que en hierba también rinde. Siempre competitivo. Monta de Fayos. Opción para tríos ampliados.",
                4: "SIR EDWARD (IRE): Mostró nivel en otoño (2º), pero sus últimas son más flojas (5º, 5º tras NP). Necesita recuperar su mejor versión. Monta de Gelabert desde cajón 5. Incógnita.",
                5: "SKYTREE (FR): El invicto que ha maravillado. Dos de dos, ganando con autoridad pasmosa en Madrid (1400m) y Dos Hermanas (1600m). Mucha clase y velocidad. La incógnita es su falta de experiencia en lotes tan nutridos y la presión de un Grupo A saliendo del cajón 1. Si maneja la situación y la pista blanda, es un rival temible. Co-favorito.",
                6: "SOLTAN GATSBY (FR): Ganador del Gran Criterium Nacional en otoño (aprovechando descargo). Viene de ser segundo en un ensayo (detrás de Yo Mauro) y cuarto en el Opcional. Tiene experiencia en la milla y la dupla Janáček/Arizkorreta es temible en estas citas. Si los favoritos se vigilan, podría pescar en río revuelto.",
                7: "STAR ONE (FR): Ganó en su segunda salida, pero luego fue quinto en un lote inferior. Parece un escalón por debajo de los principales. Necesita mejorar.",
                8: "TANAGER (GB): Solo colocaciones menores (tres terceros) en 5 salidas. Parece limitado a este nivel. Difícil.",
                9: "WELLINGTON PREMIER (FR): Ganó en otoño, pero sus actuaciones de primavera (4º, 4º, 6º) no impresionan para una Poule. Necesita un salto cualitativo.",
                10: "YO MAURO (IRE): Otro Arizkorreta, de una regularidad asombrosa (2º de Skytree, 1º fácil, 2º de Gaucín). Siempre competitivo y luchador. Aunque su jockey es menos mediático, su preparación y forma le hacen muy peligroso. Podría dar la sorpresa a los dos grandes favoritos.",
                11: "YOGUI (FR): Segundo espada de Arizkorreta. Aún no ha ganado (dos segundos, un cuarto), pero tiene un buen remate. Si encuentra paso en la recta final (desde cajón 8), podría mejorar su historial y colarse en el trío. Sorpresa remota."
            },
             4: { // Carrera 4
                1: "MONEYMAN (GB): Viene de dos no participaciones tras dos buenas colocaciones (3º, 2º). El peso máximo (63kg) refleja esa calidad pasada. Si está recuperado, puede ser peligroso, aunque la reaparición con tanto peso es difícil. Podría marcar el paso.",
                2: "RUESGA (IRE): Ganó dos carreras seguidas en invierno subiendo de valor. Reapareció con un tercer puesto correcto. Llega más afinado a esta segunda salida del año. Los 61.5kg son exigentes, pero tiene calidad y gusto por la victoria. Peligroso si impone su ritmo desde el cajón 1.",
                3: "VEREMOS (GB): Veterano muy regular. Acumula dos terceros puestos recientes en lotes similares. Conoce la distancia y la pista blanda le va bien. Con 61kg, quizás más para colocado que para ganar, pero su experiencia es un plus.",
                4: "TRADE HONOUR (FR): Viene de dos magníficos segundos puestos en hándicaps de nivel, perdiendo por muy poco. Ganó en otoño. Con un peso razonable (59.5kg) y Janáček, es el caballo a batir. Muy fiable y con buen remate. Sale abierto (cajón 11).",
                5: "NAT IMPACT (GB): Hermano de Veremos, misma cuadra y preparación. Actuaciones discretas (5º, 7º, 5º, 7º). Necesita mejorar. Monta con descargo (58,5kg efectivos).",
                6: "LUNA ROSSA: Yegua tremendamente consistente. Casi siempre en el dinero (victorias, segundos, terceros). Se adapta a todo. Con 59kg y Sousa, es la principal rival de Trade Honor. Su remate final es poderoso. Sale muy abierta (cajón 12).",
                7: "CHENER (FR): Viene de ganar en su última (en línea recta), mostrando estar en forma. Sube de categoría y vuelve a una distancia más larga, pero con 58.5kg y Gelabert, podría seguir en la buena línea. A vigilar.",
                8: "FLOREA (FR): Yegua asimilada con buena forma reciente (3º, 2º, 1º, 4º, 7º). Su victoria fue en lote inferior. Con 57,5kg y Mendizabal, puede optar a una colocación.",
                9: "SUN KING (IRE): Veterano que suele colarse en llegadas apretadas (varios terceros recientes). Si el ritmo no es muy exigente, podría aguantar cerca y rascar una colocación con su peso ligero (56,5kg efectivos).",
                10: "MYSTERY LAND: Ganó en su última tras un tiempo discreto. Ha reencontrado sensaciones. Sube de nivel, pero con peso ligero (55,5kg efectivos) y monta con descargo, podría repetir buena actuación si la carrera se vuelve táctica.",
                11: "TRAMPAS: Actuaciones muy pobres (8º, 17º, 9º, 9º, 7º). Necesita una transformación radical para figurar, incluso con peso bajo (54kg efectivos).",
                12: "XERAC (IRE): ¡El tapado! Este 4 años de Arizkorreta ha estado colocado en hándicaps similares (dos terceros, un cuarto) y aquí corre con el peso mínimo (54.5kg). Esa ligereza en pista blanda puede ser oro. Si los de arriba se pelean, podría dar la gran sorpresa. Muy interesante para apuestas de valor."
            },
            5: { // Carrera 5 - GP Valderas
                1: "ANNIE'S SONG (FR): Actuaciones modestas (6º, 3º, 7º, 7º). Su tercer puesto fue en lote inferior. Necesita mejorar mucho para la Poule.",
                2: "BATED DREAM (IRE): Explotó este año ganando dos carreras, incluyendo el Opcional contra machos con autoridad. Demostró mucha calidad. Aunque fue 4ª en su última (quizás acusando esfuerzo previo), tiene peligro si impone su velocidad desde el cajón 1.",
                3: "CASTING A SPELL (IRE): Regularidad en colocaciones menores (3º, 4º, 3º, 6º, 3º). Combativa, pero parece un peldaño por debajo de las favoritas.",
                4: "ECOLOGY (IRE): La potranca enrachada. Viene de ganar dos carreras seguidas 'de punta a punta', subiendo de valor. Si Fayos consigue dosificarla en cabeza desde el cajón exterior (13) y la pista ayuda, puede ser muy difícil de pasar. La sorpresa peligrosa.",
                5: "FICTION (GB): Dominadora del invierno con tres victorias seguidas, mostrando un cambio de ritmo brutal. Falló (7ª) en su última, quizás por pista pesada o un mal día. Si Anaya la recupera, tiene clase para ganar. Monta de Sousa desde el cajón 2 (riesgo de encierro). Co-favorita con incógnitas.",
                6: "GHOST RUN (GB): Ganó bien en otoño, pero sus actuaciones de primavera (10º, 7º) son decepcionantes. Necesita volver a su mejor nivel. Preparación Arizkorreta.",
                7: "LADY COCODY (FR): Ganó en Madrid y fue 2ª y 3ª, pero algo diluida en la preparatoria (5ª). Necesita mejorar para pelear con las mejores aquí.",
                8: "LEVHAIMUR (GB): La más sólida por forma reciente. Ganadora del Critérium Nacional en otoño, viene de dos segundos puestos en preparatorias fuertes contra machos (Atlántida y Torneo). Consistente, con un potente remate final. Monta de Gutierrez y cajón 7 ideal. Favorita principal.",
                9: "MARMARA (GB): Ganó un buen maiden y fue 2ª en Grupo III local el año pasado. Reapareció floja (7º). Si retoma su progresión juvenil, a cuota muy alta podría rascar un tercer puesto impensable. Cajón 6.",
                10: "OCTANS: Otra Arizkorreta (Yeguada Rocío). Muy regular: dos victorias (Critérium Potrancas, reaparición) y dos segundos (detrás de Leyhaimur por la mínima en el Atlántida). Ganó en blando. Versátil tácticamente. Con Janáček desde el cajón 3, es una candidata muy seria al triunfo.",
                11: "THEYKNOWWEKNOW (IRE): Ganadora del Gran Criterium de Potrancas en septiembre pasado, pero luego tuvo altibajos (5º, 1º en Francia, 2º, 2º). Si recupera su mejor nivel, tiene clase para estar en la llegada, aunque el cajón 12 no ayuda.",
                12: "VOZPORNOCHE (IRE): Alterna victorias (2) y buenas colocaciones (dos 3ºs) en carreras duras. Muy combativa. Entrenada por Tsereteli (ganador 2023). Si la lucha es dura, podría aprovechar un hueco interior (cajón 4) para colarse.",
                13: "ZAMBRA (FR): Ganó en otoño, pero sus actuaciones primaverales son más discretas (3º, 6º, 4º, 4º). Parece necesitar más distancia o un lote inferior. Cajón 10."
            },
             6: { // Carrera 6
                1: "PARTING GLASS (IRE): El top weight (63kg). Ganador el año pasado, pero sus últimas son discretas (9º, 6º). Necesita mejorar mucho para justificar los kilos en un sprint tan competitivo.",
                2: "ORIGEN (IRE): Ganador de dos carreras recientes (1400m, 1200m) mostrando velocidad. Reapareció 4º. Bajar a 1000m puede sentarle bien. Muy rápido de salida. Los 61kg son su principal hándicap, pero su punta de velocidad inicial le da opciones serias de colocación.",
                3: "ASSEMBLY CALL (IRE): El caballo en forma. Tres victorias en sus últimas cuatro, incluyendo la más reciente, subiendo de valor. Calidad sprinter contrastada. Aunque carga peso (60.5kg), su remate final puede ser decisivo. Suele venir de atrás. Favorito principal.",
                4: "ABACUR (FR): Ganador de sprint y colocado en pruebas de nivel (3º Soudzou). Buen cambio de ritmo. Su última (5º Covarrubias) fue correcta. Con Janáček buscando el mejor carril desde el cajón 3, es una opción seria para el trío.",
                5: "JUNGLE FEVER (IRE): Alterna distancias, pero ya ganó en 1200m. En 1000m puede adaptarse. Sus últimas (4º, 5º, 2º) muestran que está cerca. Desde el cajón 1 interior.",
                6: "ALL IS FAIR (IRE): Ganó en línea recta en otoño. Algo irregular después (7º, 4º). Con 59kg, podría resurgir si tiene un buen día. Tiene una gran salida, podría intentar liderar.",
                7: "BE TRUE (FR): La yegua viene de ganar un hándicap importante (1200m) con un final espectacular. Antes fue segunda en Madrid. Muy veloz y en momento dulce. Con un peso competitivo (58.5kg) y la monta de Sousa desde el cajón exterior (10), es la gran rival de Assembly Call.",
                8: "FRED ON FIRE (IRE): Potranca de 3 años, ganadora de un sprint en otoño contra coetáneos. Sus subidas de categoría (4ª, 8ª) no fueron buenas. Recibe peso (55kg), pero le falta experiencia contra mayores en Madrid. Incógnita.",
                9: "SIR GEOFF MORGAN (IRE): El otro 3 años. Brilló en Dos Hermanas ganando dos hándicaps seguidos. Falló en su incursión en Madrid (9º), pero aquí corre con un peso pluma (52kg). Si se adapta a la recta de LZ desde el cajón 2, puede ser la gran sorpresa por su ligereza.",
                10: "BERSERKER EXTREM: El de menor valor, pero con solo 52 kg. Sus últimas no invitan al optimismo (6º, 5º, 5º), pero ya dio alguna sorpresa en sprints con peso similar. Opción remotísima pero a cuota astronómica."
            }
        };


        // Función para obtener el análisis detallado de un caballo
        function getHorseAnalysis(raceNum, horseNum) {
            // Intenta obtener el análisis específico
            const analysis = horseAnalysisData[raceNum]?.[horseNum];
            // Si no existe, devuelve un mensaje genérico
            return analysis || "Análisis experto detallado no disponible para este participante.";
        }

        // Muestra la ventana modal con los detalles del caballo seleccionado
        function showHorseModal(rowElement, raceNum) {
            const cells = rowElement.querySelectorAll('td');
            if (cells.length < 9) return; // Asegurar que la fila tiene suficientes celdas

            // Extraer datos de las celdas de la tabla
            const num = cells[0].textContent.trim();
            const nameWithEquip = cells[1].textContent.trim();
            const age = cells[2].textContent.trim();
            const kg = cells[3].textContent.trim();
            const jockey = cells[4].textContent.trim();
            const cuadra = cells[5].textContent.trim();
            const trainer = cells[6].textContent.trim();
            const cajon = cells[7].textContent.trim();
            const ultAct = cells[8].textContent.trim();

            // Procesar nombre y equipamiento
            let horseName = nameWithEquip;
            let equipHtml = '';
            const equipRegex = /\s*\(([\da-z]+)\)/gi; // Regex para encontrar símbolos entre paréntesis
            let match;
            const equipSymbolsFound = []; // Almacenar símbolos encontrados

            // Extraer todos los símbolos de equipamiento del nombre
            while ((match = equipRegex.exec(nameWithEquip)) !== null) {
                equipSymbolsFound.push(match[0].trim());
            }
            // Limpiar el nombre del caballo quitando los símbolos
            horseName = nameWithEquip;
            equipSymbolsFound.forEach(symbol => {
                const escapedSymbol = symbol.replace(/[()]/g, '\\$&'); // Escapar paréntesis para regex
                horseName = horseName.replace(new RegExp(`\\s*${escapedSymbol}`), ''); // Quitar símbolo y espacio
            });
            horseName = horseName.trim(); // Nombre limpio

            // Mapear símbolos a texto descriptivo
            const equipFound = [];
             equipSymbolsFound.forEach(symbol => {
                 if (equipamientoMap[symbol]) {
                     equipFound.push(equipamientoMap[symbol]); // Añadir descripción si existe en el mapa
                 }
             });
             // Generar HTML para mostrar el equipamiento
             if (equipFound.length > 0) {
                equipHtml = equipFound.map(e => `<span class="inline-block bg-gray-200 text-gray-700 px-2 py-0.5 rounded text-xs mr-1 mb-1">${e}</span>`).join('');
             } else {
                 equipHtml = '<span class="text-gray-500 text-xs">Ninguno</span>'; // Mensaje si no hay equipamiento
             }

            // Obtener el estatus del pick y el análisis detallado
            const pick = getPickStatus(raceNum, horseName);
            const analysisText = getHorseAnalysis(raceNum, parseInt(num));

            // Rellenar los campos del modal
            document.getElementById('modalHorseName').textContent = `${num}. ${horseName}`;
            document.getElementById('modalHorseNum').textContent = num;
            document.getElementById('modalHorseAge').textContent = age;
            document.getElementById('modalHorseKg').textContent = kg;
            document.getElementById('modalHorseJockey').textContent = jockey;
            document.getElementById('modalHorseCuadra').textContent = cuadra;
            document.getElementById('modalHorseTrainer').textContent = trainer;
            document.getElementById('modalHorseCajon').textContent = cajon;
            document.getElementById('modalHorseUltAct').textContent = ultAct;
            document.getElementById('modalHorseEquip').innerHTML = equipHtml; // Usar innerHTML para los spans
            document.getElementById('modalAnalysisText').textContent = analysisText; // Usar textContent para el análisis

            // Mostrar el estatus del pick si existe
            const pickStatusDiv = document.getElementById('modalPickStatus');
            if (pick.status !== 'none') {
                pickStatusDiv.textContent = pick.text; // Texto del pick
                pickStatusDiv.className = 'modal-pick-status'; // Resetear clases
                pickStatusDiv.classList.add(pick.class); // Añadir clase de color
                pickStatusDiv.classList.remove('hidden'); // Mostrar
            } else {
                 pickStatusDiv.classList.add('hidden'); // Ocultar si no es un pick
            }

            // Mostrar el modal
            document.getElementById('horseModal').classList.add('active');
        }

        // Cierra la ventana modal
        function closeModal() {
            document.getElementById('horseModal').classList.remove('active');
        }

        // Cierra el modal si se hace clic fuera del contenido
        function closeModalOutside(event) {
             if (event.target === document.getElementById('horseModal')) {
                 closeModal();
             }
        }

    </script>

</body>
</html>
